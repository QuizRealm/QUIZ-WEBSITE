<!DOCTYPE html>
<html lang="en">
<head>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-ML3F7KLZ');</script>
<!-- End Google Tag Manager -->
 <script type="module" src="firebase-config.js"></script>
  <script src="game-engine.js"></script> <script src="components.js" defer></script>
<script type="module" src="assets/ux-core.js"></script> 
<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">   
 <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
<meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; style-src 'self' 'unsafe-inline' https:; script-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:;">
    <title>QuizRealm â€¢ Quiz Setup</title>

    
    <meta name="theme-color" content="#0A0F1E">
    <meta name="description" content="Choose a category and difficulty, see how many questions are available, and review how the quiz works before you start.">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="shortcut icon" href="assets/favicon.ico">
<meta name="msapplication-TileColor" content="#020617">
<meta name="theme-color" content="#020617">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Outfit:wght@300;400;500;700;800&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="data.js"></script> 
    <script src="components.js" defer></script>
<script type="module" src="assets/ux-core.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['Outfit', 'sans-serif'], 
                        arcade: ['Bungee', 'cursive'],
                        mono: ['Share Tech Mono', 'monospace']
                    },
                    colors: {
                        bgDark: '#0A0F1E',
                        bgDarker: '#050810',
                        accentBlue: '#3b82f6',
                        accentCyan: '#06b6d4',
                        accentGreen: '#10b981',
                        accentOrange: '#f97316',
                        accentRed: '#ef4444',
                        accentGold: '#eab308',
                        glass: 'rgba(30, 41, 59, 0.6)'
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        body { 
            background-color: var(--bgDarker); 
            background-image: radial-gradient(circle at 50% 0%, #1e1b4b, #050810 80%);
            min-height: 100vh; 
            color: #e2e8f0;
            overflow-x: hidden;
        }

        .grid-bg { 
            background-size: 60px 60px; 
            background-image: linear-gradient(
                to right, rgba(59, 130, 246, 0.03) 1px, transparent 1px
            ), 
            linear-gradient(
                to bottom, rgba(59, 130, 246, 0.03) 1px, transparent 1px
            ); 
            mask-image: linear-gradient(to bottom, black 20%, transparent 90%); 
        }
        
        .glass-panel { 
            background: var(--glass); 
            backdrop-filter: blur(16px); 
            border: 1px solid rgba(255, 255, 255, 0.05); 
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .diff-card {
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        .diff-card:hover {
            transform: translateX(8px);
            background: rgba(255,255,255,0.05);
        }
        .diff-easy:hover   { border-color: #06b6d4; box-shadow: 0 0 20px rgba(6, 182, 212, 0.2); }
        .diff-medium:hover { border-color: #f97316; box-shadow: 0 0 20px rgba(249, 115, 22, 0.2); }
        .diff-hard:hover   { border-color: #ef4444; box-shadow: 0 0 20px rgba(239, 68, 68, 0.2); }

        .micro-action {
            transition: transform .2s ease, background .2s ease, border-color .2s ease;
        }
        .micro-action:hover {
            transform: translateY(-2px);
            background: rgba(255,255,255,0.06);
            border-color: rgba(255,255,255,0.18);
        }
    </style>
</head>
<body class="flex flex-col antialiased selection:bg-accentBlue selection:text-white">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ML3F7KLZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <div class="fixed inset-0 grid-bg pointer-events-none z-[-1]"></div>

    <quiz-header></quiz-header>

    <main class="flex-grow w-full flex flex-col items-center justify-start p-4 md:p-8 space-y-12">
        
        <div class="w-full max-w-6xl grid grid-cols-1 md:grid-cols-12 gap-8">

            <div class="md:col-span-5 lg:col-span-4 flex flex-col gap-6">
                
                <button onclick="history.back()" class="text-xs font-mono text-slate-400 hover:text-white flex items-center gap-2 transition w-fit">
                    <i class="fas fa-chevron-left"></i> GO BACK
                </button>

                <div class="glass-panel rounded-xl overflow-hidden border border-white/10 group sticky top-24">
                    <div class="relative h-64 md:h-80 w-full">
                        <img id="catImg" src="" class="absolute inset-0 w-full h-full object-cover transition duration-700 group-hover:scale-105">
                        <div class="absolute inset-0 bg-gradient-to-t from-bgDarker via-transparent to-transparent"></div>
                        
                        <div class="absolute bottom-0 left-0 w-full p-6">
                            <div class="flex items-center justify-between gap-3 mb-2">
                                <span class="bg-accentBlue/20 text-accentBlue border border-accentBlue/50 text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wider backdrop-blur-md" id="catGroup">General</span>
                                <span class="text-[10px] font-mono text-slate-300/80 bg-black/30 border border-white/10 px-2 py-1 rounded-lg backdrop-blur-md">
                                    <i class="fas fa-signal mr-1 text-accentGreen"></i> Setup
                                </span>
                            </div>
                            <h1 class="font-arcade text-3xl text-white leading-none shadow-black drop-shadow-md" id="catTitle">LOADING</h1>
                        </div>
                    </div>
                    
                    <div class="p-6 border-t border-white/5 space-y-5">
                        <div class="flex justify-between items-center">
                            <span class="text-xs text-slate-400 font-mono">QUIZ STATUS</span>
                            <span class="text-xs text-accentGreen font-bold flex items-center gap-1">
                                <span class="w-2 h-2 bg-accentGreen rounded-full animate-pulse"></span> READY
                            </span>
                        </div>

                        <p class="text-sm text-slate-300 leading-relaxed">
                            Youâ€™re about to start a quiz on <span id="catNameText" class="text-white font-bold"></span>. Choose a difficulty level below and then start the quiz when youâ€™re ready.
                        </p>

                        <!-- NEW: Quick actions (UX-only, no quiz logic changes) -->
                        <div class="grid grid-cols-2 gap-3">
                            <a id="encyclopediaBtn"
                                href="#"
                                class="px-6 py-3 rounded-xl border border-white/15 text-slate-200 hover:text-white hover:bg-white/5 transition inline-flex items-center gap-2">
                                <i class="fas fa-book-open"></i>
                                Encyclopedia
                                </a>

                            <a href="categories.html"
                               class="micro-action inline-flex items-center justify-center gap-2 rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-xs font-bold text-slate-200 hover:text-white">
                                <i class="fas fa-layer-group text-accentBlue"></i>
                                Browse Categories
                            </a>
                        </div>
                    </div>
                </div>

            </div>

            <div class="md:col-span-7 lg:col-span-8 flex flex-col justify-center">
                
                <div class="mb-6">
                    <h2 class="text-xl font-bold text-white mb-1">Choose difficulty level</h2>
                    <p class="text-xs text-slate-500 font-mono">Higher difficulty can give more XP and a bigger challenge.</p>
                </div>

                <div class="space-y-4">
                    
                    <div onclick="goToQuiz('easy')" class="diff-card diff-easy glass-panel p-5 rounded-xl border-l-4 border-l-accentCyan flex items-center justify-between group">
                        <div class="flex items-center gap-5">
                            <div class="w-12 h-12 rounded-lg bg-accentCyan/10 flex items-center justify-center text-2xl text-accentCyan border border-accentCyan/20 group-hover:scale-110 transition">ðŸ˜Œ</div>
                            <div>
                                <h3 class="text-white font-bold text-lg group-hover:text-accentCyan transition">Easy</h3>
                                <p class="text-xs text-slate-400">Standard time. Friendly questions to warm up.</p>

                                <!-- NEW: mobile counts (display-only) -->
                                <div class="sm:hidden mt-2 text-[11px] font-mono text-slate-400">
                                    <span class="text-white font-bold" id="countEasyMobile">--</span> questions available
                                </div>
                            </div>
                        </div>
                        <div class="text-right hidden sm:block">
                            <div class="text-xl font-mono text-white font-bold" id="countEasy">--</div>
                            <div class="text-[10px] text-slate-500 uppercase">Questions</div>
                        </div>
                    </div>

                    <div onclick="goToQuiz('medium')" class="diff-card diff-medium glass-panel p-5 rounded-xl border-l-4 border-l-accentOrange flex items-center justify-between group">
                        <div class="flex items-center gap-5">
                            <div class="w-12 h-12 rounded-lg bg-accentOrange/10 flex items-center justify-center text-2xl text-accentOrange border border-accentOrange/20 group-hover:scale-110 transition">ðŸ§ </div>
                            <div>
                                <h3 class="text-white font-bold text-lg group-hover:text-accentOrange transition">Medium</h3>
                                <p class="text-xs text-slate-400">Balanced time. A mix of easy and challenging questions.</p>

                                <!-- NEW: mobile counts (display-only) -->
                                <div class="sm:hidden mt-2 text-[11px] font-mono text-slate-400">
                                    <span class="text-white font-bold" id="countMediumMobile">--</span> questions available
                                </div>
                            </div>
                        </div>
                        <div class="text-right hidden sm:block">
                            <div class="text-xl font-mono text-white font-bold" id="countMedium">--</div>
                            <div class="text-[10px] text-slate-500 uppercase">Questions</div>
                        </div>
                    </div>

                    <div onclick="goToQuiz('hard')" class="diff-card diff-hard glass-panel p-5 rounded-xl border-l-4 border-l-accentRed flex items-center justify-between group">
                        <div class="flex items-center gap-5">
                            <div class="w-12 h-12 rounded-lg bg-accentRed/10 flex items-center justify-center text-2xl text-accentRed border border-accentRed/20 group-hover:scale-110 transition">ðŸ”¥</div>
                            <div>
                                <h3 class="text-white font-bold text-lg group-hover:text-accentRed transition">Hard</h3>
                                <p class="text-xs text-slate-400">Shorter time. Tough questions for experts.</p>

                                <!-- NEW: mobile counts (display-only) -->
                                <div class="sm:hidden mt-2 text-[11px] font-mono text-slate-400">
                                    <span class="text-white font-bold" id="countHardMobile">--</span> questions available
                                </div>
                            </div>
                        </div>
                        <div class="text-right hidden sm:block">
                            <div class="text-xl font-mono text-white font-bold" id="countHard">--</div>
                            <div class="text-[10px] text-slate-500 uppercase">Questions</div>
                        </div>
                    </div>

                </div>

            </div>

        </div>

        <div class="w-full max-w-6xl space-y-8 border-t border-white/5 pt-12">
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <div id="dossierCard" class="glass-panel rounded-xl p-6 h-full border-l-4 border-l-accentCyan">
                    <div class="flex items-center justify-between gap-3 mb-4 border-b border-white/5 pb-2">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-clipboard-list text-accentCyan"></i>
                            <h3 class="text-sm font-bold text-white uppercase tracking-widest">Category Details</h3>
                        </div>

                        <!-- NEW: secondary encyclopedia link (same target as left card) -->
                        <a id="encyclopediaLink2"
                           href="#"
                           class="text-[11px] font-mono text-slate-300 hover:text-white inline-flex items-center gap-2">
                            <i class="fas fa-book text-accentGold"></i>
                            Read more
                            <i class="fas fa-arrow-right text-slate-500"></i>
                        </a>
                    </div>
                    <div class="text-sm text-slate-300 leading-relaxed space-y-4">
                        <p id="longDescription">Loading description for this category...</p>
                        <p class="text-xs text-slate-500 italic" id="shortDescription">Summary: loading category overviewâ€¦</p>
                    </div>
                </div>

                <div class="glass-panel rounded-xl p-6 h-full border-l-4 border-l-accentBlue">
                    <div class="flex items-center gap-2 mb-4 border-b border-white/5 pb-2">
                        <i class="fas fa-book text-slate-500"></i>
                        <h3 class="text-sm font-bold text-white uppercase tracking-widest">How scoring works</h3>
                    </div>
                    <ul class="space-y-3">
                        <li class="flex items-start gap-3">
                            <div class="w-1.5 h-1.5 rounded-full bg-accentBlue mt-2"></div>
                            <div>
                                <span class="text-white text-sm font-bold block">Scoring</span>
                                <span class="text-xs text-slate-400">
                                    Points are awarded based on how many questions you get right and how fast you answer them.
                                </span>
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <div class="w-1.5 h-1.5 rounded-full bg-accentOrange mt-2"></div>
                            <div>
                                <span class="text-white text-sm font-bold block">Streaks</span>
                                <span class="text-xs text-slate-400">
                                    Consecutive correct answers can boost your XP. A wrong answer resets your streak.
                                </span>
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <div class="w-1.5 h-1.5 rounded-full bg-accentGreen mt-2"></div>
                            <div>
                                <span class="text-white text-sm font-bold block">Achievements</span>
                                <span class="text-xs text-slate-400">
                                    Outstanding runs can unlock <a href="achievements.html" class="text-accentGreen underline">new achievements</a> on your profile.
                                </span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="w-full">
                <div class="glass-panel rounded-xl p-6 h-full border-l-4 border-l-accentGreen">
                    <div class="flex items-center gap-2 mb-4 border-b border-white/5 pb-2">
                        <i class="fas fa-play-circle text-accentGreen"></i>
                        <h3 class="text-sm font-bold text-white uppercase tracking-widest">Quiz rules & scoring</h3>
                    </div>
                    <ul class="space-y-3 text-sm text-slate-300">
                        <li class="flex items-start gap-3">
                            <i class="fas fa-check-circle text-accentGreen mt-1.5 flex-shrink-0"></i>
                            <div>
                                <span class="font-bold block text-white">What you do:</span>
                                Answer 10 randomized questions from the difficulty level you pick.
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="fas fa-clock text-accentOrange mt-1.5 flex-shrink-0"></i>
                            <div>
                                <span class="font-bold block text-white">Time limit:</span>
                                There is a time limit for each question. Harder modes may give you less time, so think quickly.
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="fas fa-medal text-accentGold mt-1.5 flex-shrink-0"></i>
                            <div>
                                <span class="font-bold block text-white">XP rewards:</span>
                                XP is influenced by the difficulty you choose, your streak of correct answers, and how quickly you respond.
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </main>

    

<div class="qr-seo-wrapper">
    <style>
        .qr-seo-wrapper { display: flex; flex-direction: column; gap: 3rem; width: 100%; max-width: 1200px; margin: 4rem auto; padding: 0 1rem; font-family: system-ui, -apple-system, sans-serif; color: #94a3b8; line-height: 1.6; }
        .qr-hub-card { position: relative; background: linear-gradient(145deg, #060b18, #0f172a); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 24px; overflow: hidden; box-shadow: 0 20px 50px -10px rgba(0, 0, 0, 0.5); padding: 2.5rem; display: flex; flex-direction: column; }
        
        /* THEMES */
        .theme-green { border-left: 4px solid #10b981; } .theme-green h2 span { color: #34d399; } .theme-green .qr-badge { background: rgba(16, 185, 129, 0.1); border-color: rgba(16, 185, 129, 0.2); color: #6ee7b7; } .theme-green a { color: #34d399; }
        .theme-purple { border-left: 4px solid #a855f7; } .theme-purple h2 span { color: #c084fc; } .theme-purple .qr-badge { background: rgba(168, 85, 247, 0.1); border-color: rgba(168, 85, 247, 0.2); color: #d8b4fe; } .theme-purple a { color: #c084fc; }
        .theme-cyan { border-left: 4px solid #06b6d4; } .theme-cyan h2 span { color: #22d3ee; } .theme-cyan .qr-badge { background: rgba(6, 182, 212, 0.1); border-color: rgba(6, 182, 212, 0.2); color: #67e8f9; } .theme-cyan a { color: #22d3ee; }
        .theme-amber { border-left: 4px solid #f59e0b; } .theme-amber h2 span { color: #fbbf24; } .theme-amber .qr-badge { background: rgba(245, 158, 11, 0.1); border-color: rgba(245, 158, 11, 0.2); color: #fcd34d; } .theme-amber a { color: #fbbf24; }

        /* LAYOUT */
        .qr-card-content { position: relative; z-index: 10; display: flex; flex-direction: column; gap: 2rem; height: 100%; }
        @media (min-width: 900px) { .qr-card-content { flex-direction: row; align-items: flex-start; } }
        .qr-main-col { flex: 1; }
        .qr-side-col { width: 100%; max-width: 320px; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 1.5rem; backdrop-filter: blur(10px); flex-shrink: 0; }
        
        /* ELEMENTS */
        .qr-badge { display: inline-flex; align-items: center; gap: 8px; padding: 4px 12px; border-radius: 99px; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.2em; margin-bottom: 1rem; font-weight: 700; }
        .qr-hub-card h2 { color: #fff; font-size: 1.8rem; margin: 0 0 1rem 0; line-height: 1.2; letter-spacing: -0.02em; }
        .qr-hub-card p { margin-bottom: 1.5rem; font-size: 0.95rem; text-align: justify; }
        .qr-hub-card strong { color: #fff; }
        .qr-hub-card a { font-weight: 600; text-decoration: none; border-bottom: 1px solid transparent; transition: 0.2s; }
        .qr-hub-card a:hover { border-bottom-color: currentColor; }
        
        /* SIDEBAR */
        .qr-sidebar-link { display: flex; align-items: center; gap: 12px; padding: 10px; margin-bottom: 8px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 10px; text-decoration: none !important; }
        .qr-sidebar-link:hover { background: rgba(255, 255, 255, 0.08); }
        .qr-link-text { display: flex; flex-direction: column; }
        .qr-link-head { color: #e2e8f0; font-size: 0.85rem; font-weight: 700; }
        .qr-link-sub { color: #64748b; font-size: 0.7rem; }
        .qr-icon { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.05); border-radius: 6px; }

        /* GRIDS */
        .qr-game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 10px; padding-top: 1.5rem; border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .qr-mini-link { padding: 8px; background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px solid rgba(255,255,255,0.05); text-align: center; font-size: 0.75rem; color: #cbd5e1 !important; }
        .qr-mini-link:hover { background: rgba(255,255,255,0.1); }
        .qr-link-matrix { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 1rem; }
        .qr-matrix-item { font-size: 0.75rem; padding: 4px 10px; border-radius: 4px; background: rgba(251, 191, 36, 0.1); color: #fbbf24 !important; border: 1px solid rgba(251, 191, 36, 0.2); }
        .qr-matrix-item:hover { background: rgba(251, 191, 36, 0.2); }

        @media (max-width: 600px) { .qr-hub-card { padding: 1.5rem; } .qr-side-col { max-width: 100%; } }
    </style>

    <div class="qr-hub-card theme-green">
        <div class="qr-card-content">
            <div class="qr-main-col">
                <div class="qr-badge"><i class="fas fa-microchip"></i> Digital Playground</div>
                <h2>Arcade Suite: <span>Mental Reflex Engines</span></h2>
                <p>
                    Step into the <strong>Quiz Realm Arcade</strong>, a curated collection of micro-games designed to test specific facets of human intelligence. Unlike traditional trivia that relies solely on memory, our arcade challenges your <strong>processing speed</strong> and <strong>pattern recognition</strong>. Games like <a href="fusion-core.html">Logic Core</a> act as a stress-test for your deductive reasoning, while <a href="rapid.html">Rapid Fire</a> measures your raw reaction time down to the millisecond.
                </p>
                <p>
                    We believe in "frictionless play." All modules, from the linguistic puzzles of <strong>Cryptex</strong> to the visual sorting of <strong>Odd One Out</strong>, are browser-native. This means instant access to high-quality brain training without app store downloads. Perfect for keeping your mind sharp during short breaks.
                </p>
                
                <div style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; margin-top: 1rem; color: #fff;">System Modules</div>
                <div class="qr-game-grid">
                    <a href="/word-ladder.html" class="qr-mini-link">Word Ladder</a>
                    <a href="/tango-logic.html" class="qr-mini-link">Tango Logic</a>
                    <a href="/spelling.html" class="qr-mini-link">Spelling Bee</a>
                    <a href="/hangman.html" class="qr-mini-link">Hangman</a>
                    <a href="/two-truths-trap.html" class="qr-mini-link">Truth Trap</a>
                    <a href="/mini-crossword.html" class="qr-mini-link">Crossword</a>
                </div>
            </div>
            <div class="qr-side-col">
                <div style="margin-bottom:1rem; font-size:0.7rem; text-transform:uppercase; letter-spacing:0.1em;">Start Session</div>
                <a href="/arcade.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-play text-green-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Play Now</span><span class="qr-link-sub">Instant Access</span></div>
                </a>
                <a href="/daily.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-clock text-green-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Daily Run</span><span class="qr-link-sub">24h Refresh</span></div>
                </a>
            </div>
        </div>
    </div>

    <div class="qr-hub-card theme-purple">
        <div class="qr-card-content">
            <div class="qr-main-col">
                <div class="qr-badge"><i class="fas fa-globe"></i> Fandom Encyclopedia</div>
                <h2>The Vaults: <span>Mastering The Canon</span></h2>
                <p>
                    True fans know that the devil is in the details. The <strong>Quiz Realm Vaults</strong> are specialized data hubs dedicated to the most expansive fictional universes in media history. Rather than asking generic questions, we dive into the <strong>Canon</strong>. Do you know the exact chemical composition of Kryptonite? Can you trace the lineage of the Targaryens or the Skywalkers without a wiki?
                </p>
                <p>
                    Our "Hub" system organizes trivia by franchise, allowing for a focused experience. When you enter the <a href="marvel.html">Marvel Hub</a> or the <a href="dc.html">DC Archive</a>, you are entering a space where accuracy matters. Prove your status as a "Lore Master" by completing our hardest difficulty tiers, designed to stump even the most dedicated subreddit moderators.
                </p>
            </div>
            <div class="qr-side-col">
                <div style="margin-bottom:1rem; font-size:0.7rem; text-transform:uppercase; letter-spacing:0.1em;">Choose Franchise</div>
                <a href="/encyclopedia/marvel.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-bolt text-purple-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">MCU & Comics</span><span class="qr-link-sub">Heroes & Villains</span></div>
                </a>
                <a href="/rickandmortyhub.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-atom text-purple-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Sci-Fi Comedy</span><span class="qr-link-sub">Rick & Morty</span></div>
                </a>
                <a href="/christmas-hub.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-snowflake text-purple-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Holiday Havoc</span><span class="qr-link-sub">Seasonal Quiz</span></div>
                </a>
            </div>
        </div>
    </div>

    <div class="qr-hub-card theme-cyan">
        <div class="qr-card-content">
            <div class="qr-main-col">
                <div class="qr-badge"><i class="fas fa-chart-line"></i> Gamified Learning</div>
                <h2>Progression: <span>Level Up Your Mind</span></h2>
                <p>
                    At Quiz Realm, we believe that learning should feel like an RPG. That is why every interaction on our site feeds into your <strong>Global Player Profile</strong>. Correct answers award <strong>Coins</strong> and <strong>XP</strong>, fueling a persistent leveling system that tracks your growth over time. Watch your rank evolve from a novice "Drifter" to a legendary "Cosmic Entity" as you master new topics.
                </p>
                <p>
                    Beyond the stats, explore your own psychology with our <strong>Archetype Engine</strong>. Our "Personality Match" quizzes don't just assign you a character; they analyze your decision-making styleâ€”Chaotic Good vs. Lawful Neutralâ€”to generate a comprehensive report on your fictional identity.
                </p>
            </div>
            <div class="qr-side-col">
                <div style="margin-bottom:1rem; font-size:0.7rem; text-transform:uppercase; letter-spacing:0.1em;">Player Stats</div>
                <a href="/profile.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-id-card text-cyan-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Dashboard</span><span class="qr-link-sub">View Progress</span></div>
                </a>
                <a href="/achievements.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-medal text-cyan-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Badges</span><span class="qr-link-sub">Unlockables</span></div>
                </a>
            </div>
        </div>
    </div>

    <div class="qr-hub-card theme-amber">
        <div class="qr-card-content">
            <div class="qr-main-col">
                <div class="qr-badge"><i class="fas fa-search"></i> Topic Explorer</div>
                <h2>Curated Collections: <span>The Knowledge Matrix</span></h2>
                <p>
                    The world is too big to study all at once. The <strong>Quiz Realm Topic Explorer</strong> allows you to filter our massive database into manageable chunks. Whether you are prepping for a pub trivia night or studying for a geography exam, our tagging system helps you find the exact dataset you need.
                </p>
                <p>
                    From the "Hard Sciences" of Physics and Chemistry to the "Liberal Arts" of Literature and Music Theory, our categories are updated weekly. Use the matrix below to bypass the homepage and launch directly into a focused learning session.
                </p>

                <div style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; margin-top: 1.5rem; color: #fff;">Quick Launch</div>
                <div class="qr-link-matrix">
                    <a href="/categories.html" class="qr-matrix-item">STEM</a>
                    <a href="/categories.html" class="qr-matrix-item">Modern History</a>
                    <a href="/categories.html" class="qr-matrix-item">Ancient Civs</a>
                    <a href="/categories.html" class="qr-matrix-item">Pop Culture</a>
                    <a href="/categories.html" class="qr-matrix-item">Global Capitals</a>
                    <a href="/categories.html" class="qr-matrix-item">Flags of the World</a>
                    <a href="/categories.html" class="qr-matrix-item">Classic Rock</a>
                    <a href="/categories.html" class="qr-matrix-item">Biology</a>
                    <a href="/categories.html" class="qr-matrix-item">Art & Design</a>
                    <a href="/categories.html" class="qr-matrix-item">NBA & NFL</a>
                    <a href="/categories.html" class="qr-matrix-item">Space Exploration</a>
                    <a href="/categories.html" class="qr-matrix-item">Language Arts</a>
                </div>
            </div>
            
            <div class="qr-side-col">
                <div style="margin-bottom:1rem; font-size:0.7rem; text-transform:uppercase; letter-spacing:0.1em;">Support</div>
                <a href="/FAQ.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-question text-amber-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Help Center</span><span class="qr-link-sub">FAQs</span></div>
                </a>
                <a href="/contact.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-bug text-amber-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Report Issue</span><span class="qr-link-sub">Feedback</span></div>
                </a>
                <a href="/Terms.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-file-contract text-amber-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Terms</span><span class="qr-link-sub">Usage Policy</span></div>
                </a>
            </div>
        </div>
    </div>

</div>


  <quiz-footer></quiz-footer>

    <script>
        // === CATEGORY INFO STATUS FUNCTION ===
        function updateDossierStatus(isAvailable, desc) {
            const card = document.getElementById('dossierCard');
            const longDescEl = document.getElementById('longDescription');
            const shortDescEl = document.getElementById('shortDescription');
            const iconEl = card.querySelector('.fa-clipboard-list, .fa-exclamation-triangle'); 
            const titleEl = card.querySelector('h3');
            
            iconEl.classList.remove('fa-clipboard-list', 'text-accentCyan', 'fa-exclamation-triangle', 'text-accentRed');
            card.classList.remove('opacity-50', 'border-l-accentRed', 'grayscale');

            if (isAvailable) {
                // Normal state: descriptions available
                longDescEl.innerHTML = desc.long;
                shortDescEl.innerHTML = `Summary: <strong>${desc.short}</strong>`;
                iconEl.classList.add('fa-clipboard-list', 'text-accentCyan');
                titleEl.textContent = 'Category Details';
            } else {
                // Fallback when you donâ€™t have description data
                longDescEl.innerHTML = `<strong>Note:</strong> No detailed description is available for this category yet. You can still play the quiz normally.`;
                shortDescEl.innerHTML = `Summary: description not available.`;
                
                card.classList.add('opacity-50', 'border-l-accentRed', 'grayscale');
                iconEl.classList.add('fa-exclamation-triangle', 'text-accentRed');
                titleEl.textContent = 'Limited Category Info';
            }
        }

        async function openEncyclopediaForCategory(category) {
  const url = `/encyclopedia/${category}.html`;

  try {
    const res = await fetch(url, { method: "HEAD", cache: "no-store" });

    if (res.ok) {
      window.location.href = url;
    } else {
      window.location.href = "/categories.html";
    }
  } catch (e) {
    // If HEAD fails due to CSP/offline, fallback to direct navigation.
    // If it 404s, your 404 page will handle it.
    window.location.href = url;
  }
}


        function initMode() {
            const params = new URLSearchParams(window.location.search);
            const category = (params.get('category') || 'geography').toLowerCase(); 
            
            if (typeof CATEGORY_CONFIG === "undefined" || !CATEGORY_CONFIG[category]) {
                document.getElementById('catTitle').textContent = "Error";
                document.getElementById('catNameText').textContent = "Unknown category";
                updateDossierStatus(false, {}); 
                return;
            }

            const config = CATEGORY_CONFIG[category];
            const descData = (typeof CATEGORY_DESCRIPTIONS !== 'undefined') ? CATEGORY_DESCRIPTIONS[category] : null;

            // Visuals
            document.getElementById('catTitle').textContent = config.label.toUpperCase();
            document.getElementById('catNameText').textContent = config.label;
            document.getElementById('catGroup').textContent = (config.group || "General").toUpperCase();
            
            const defaultImg = "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80";
            const img = (config.img && config.img.trim() !== "") ? config.img : defaultImg;
            document.getElementById('catImg').src = img;

            // NEW: encyclopedia link wiring (does not affect quiz logic)
            // Convention: /encyclopedia/<category>.html
            const encUrl = `encyclopedia/${category}.html`;
            const enc1 = document.getElementById('encyclopediaLink');
            const enc2 = document.getElementById('encyclopediaLink2');
            if (enc1) enc1.href = encUrl;
            if (enc2) enc2.href = encUrl;
            const encBtn = document.getElementById("encyclopediaBtn");
            if (encBtn) {
            encBtn.addEventListener("click", (e) => {
                e.preventDefault();
                openEncyclopediaForCategory(category);
            });
            }

            // Descriptions
            if (descData && descData.long && descData.short) {
                updateDossierStatus(true, descData);
            } else {
                updateDossierStatus(false, {});
            }

            // Question counts
            let e = 0, m = 0, h = 0;

            if (typeof QUESTION_BANKS !== 'undefined' && QUESTION_BANKS[category]) {
                const bank = QUESTION_BANKS[category];

                if (bank.easy || bank.medium || bank.hard) {
                    if (Array.isArray(bank.easy))   e = bank.easy.length;
                    if (Array.isArray(bank.medium)) m = bank.medium.length;
                    if (Array.isArray(bank.hard))   h = bank.hard.length;
                } 
                else if (Array.isArray(bank)) {
                    const total = bank.length;
                    const hasDiffProperty = bank.some(q => q.difficulty);

                    if (hasDiffProperty) {
                        e = bank.filter(q => q.difficulty === 'easy').length;
                        m = bank.filter(q => q.difficulty === 'medium').length;
                        h = bank.filter(q => q.difficulty === 'hard').length;
                    } else {
                        e = Math.ceil(total / 3);
                        m = Math.ceil(total / 3);
                        h = total - e - m;
                    }
                }
            } else {
                console.error("No data bank found for key:", category);
            }

            document.getElementById('countEasy').textContent   = e > 0 ? e : "N/A";
            document.getElementById('countMedium').textContent = m > 0 ? m : "N/A";
            document.getElementById('countHard').textContent   = h > 0 ? h : "N/A";

            // NEW: mirror counts on mobile (display-only)
            const eM = document.getElementById('countEasyMobile');
            const mM = document.getElementById('countMediumMobile');
            const hM = document.getElementById('countHardMobile');
            if (eM) eM.textContent = e > 0 ? e : "N/A";
            if (mM) mM.textContent = m > 0 ? m : "N/A";
            if (hM) hM.textContent = h > 0 ? h : "N/A";
        }

        function goToQuiz(difficulty) {
            const params = new URLSearchParams(window.location.search);
            const category = (params.get('category') || 'geography').toLowerCase();
            
            const countEl = difficulty === 'easy' 
                ? 'countEasy' 
                : difficulty === 'medium' 
                    ? 'countMedium' 
                    : 'countHard';

            const count = document.getElementById(countEl).innerText;

            if (count === "N/A" || count === "0") {
                alert(`No ${difficulty} questions found for this category yet.`);
                return;
            }

            window.location.href = `quiz.html?category=${category}&difficulty=${difficulty}`;
        }

        window.addEventListener('load', initMode);
    </script>
</body>
</html>
