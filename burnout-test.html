<!DOCTYPE html>
<html lang="en">
<head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-ML3F7KLZ');</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Burnout Diagnostic â€¢ Career Health | QuizRealm</title>
    <meta name="description" content="Are you tired or are you done? A 13-point clinical audit of your exhaustion, cynicism, and efficacy.">
    <meta name="theme-color" content="#57534e">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="components.js" defer></script>
    <script type="module" src="game-engine.js"></script>
    <script type="module" src="assets/ux-core.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        'serif': ['DM Serif Display', 'serif'], 
                        'sans': ['Outfit', 'sans-serif'] 
                    },
                    colors: { 
                        'sage-main': '#4d7c74', // Deep Sage
                        'sage-light': '#a7c4bc', // Soft Green
                        'clay-accent': '#d97757', // Terracotta
                        'sand-bg': '#f5f2eb', // Cream paper
                        'ink-text': '#292524' // Warm Black
                    },
                    boxShadow: {
                        'soft': '0 20px 40px -10px rgba(77, 124, 116, 0.15)',
                        'lift': '0 10px 25px -5px rgba(0,0,0,0.1)'
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #f5f2eb; color: #292524; font-family: 'Outfit', sans-serif; overflow-x: hidden; }
        
        /* Organic Shape Background */
        .shape-blob {
            position: absolute; border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            filter: blur(60px); z-index: -1; opacity: 0.6;
            animation: float 10s infinite;
        }
        
        /* Card UI */
        .spa-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
            border: 1px solid rgba(77, 124, 116, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        /* Buttons */
        .btn-option {
            background: white;
            border: 1px solid #e7e5e4;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .btn-option:hover {
            border-color: #4d7c74;
            background: #f0fdfa;
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(77, 124, 116, 0.1);
        }

        .btn-cta {
            background: #292524; color: #f5f2eb;
            transition: all 0.3s ease;
        }
        .btn-cta:hover {
            background: #4d7c74; transform: scale(1.02);
        }

        /* Progress Bar */
        .progress-track { background: #e7e5e4; height: 8px; border-radius: 99px; overflow: hidden; }
        .progress-fill { background: #d97757; height: 100%; border-radius: 99px; transition: width 0.5s ease; }

        /* Typography Highlights */
        .highlight { position: relative; z-index: 1; }
        .highlight::after {
            content: ""; position: absolute; bottom: 2px; left: 0; width: 100%; height: 30%;
            background: #a7c4bc; z-index: -1; opacity: 0.6;
        }
    </style>
</head>

<body class="flex flex-col min-h-screen">
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ML3F7KLZ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="shape-blob bg-sage-light w-96 h-96 top-0 right-0 translate-x-1/3 -translate-y-1/3"></div>
        <div class="shape-blob bg-clay-accent/20 w-80 h-80 bottom-0 left-0 -translate-x-1/3 translate-y-1/3 animation-delay-2000"></div>
    </div>

    <quiz-header style="color: #292524;"></quiz-header>

    <main class="flex-grow w-full max-w-2xl mx-auto px-6 py-16 relative z-10">

        <div id="start-screen" class="text-center space-y-10 animate-float" style="animation-duration: 8s;">
            
            <div class="w-20 h-20 bg-sage-main text-sand-bg rounded-2xl flex items-center justify-center mx-auto text-3xl shadow-soft">
                <i class="fas fa-battery-quarter"></i>
            </div>

            <div>
                <h1 class="font-serif text-5xl md:text-6xl text-ink-text mb-6 leading-tight">
                    The Burnout <br><span class="highlight">Diagnostic.</span>
                </h1>
                <p class="text-stone-500 text-lg leading-relaxed max-w-md mx-auto">
                    Are you just tired, or is your soul leaving your body? <br>
                    A 13-point audit of your <strong class="text-sage-main">Exhaustion</strong>, <strong class="text-clay-accent">Cynicism</strong>, and <strong class="text-ink-text">Efficacy</strong>.
                </p>
            </div>

            <div class="grid grid-cols-3 gap-4 text-xs font-bold text-stone-400 uppercase tracking-widest border-y border-stone-200 py-6">
                <div><i class="fas fa-brain mb-2 block text-xl text-sage-main"></i>Mental</div>
                <div><i class="fas fa-heart-broken mb-2 block text-xl text-clay-accent"></i>Emotional</div>
                <div><i class="fas fa-running mb-2 block text-xl text-ink-text"></i>Physical</div>
            </div>

            <button onclick="window.startQuiz()" class="btn-cta px-10 py-4 text-sm font-bold uppercase tracking-widest rounded-full shadow-lg">
                Start Check-In
            </button>
        </div>

        <div id="quiz-interface" class="hidden min-h-[50vh] flex flex-col justify-center">
            
            <div class="mb-12">
                <div class="flex justify-between items-end mb-3">
                    <span class="text-xs font-bold uppercase text-sage-main tracking-widest" id="q-category">Category</span>
                    <span class="text-xs font-mono text-stone-400" id="timer-display">00:00</span>
                </div>
                <div class="progress-track">
                    <div id="progress-bar" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <h2 id="question-text" class="font-serif text-3xl md:text-4xl text-ink-text mb-10 leading-tight">
                Loading question...
            </h2>

            <div id="options-container" class="space-y-4">
                </div>

        </div>

        <div id="result-screen" class="hidden text-center">
            
            <div class="spa-card p-10 mb-8">
                <span class="text-[10px] uppercase tracking-[0.3em] text-stone-400 mb-4 block">Current Status</span>
                
                <h2 class="font-serif text-4xl md:text-6xl text-ink-text mb-2 leading-none">
                    <span id="result-title">Loading...</span>
                </h2>
                
                <h3 id="result-subtitle" class="text-clay-accent font-sans font-bold text-sm uppercase tracking-widest mb-8">
                    Loading...
                </h3>

                <p id="result-summary" class="text-lg text-stone-600 leading-relaxed font-light">
                    Processing your stress levels...
                </p>
            </div>

            <div class="space-y-4">
                <button onclick="document.getElementById('full-report').classList.toggle('hidden')" class="w-full bg-white border border-stone-200 py-4 rounded-xl text-xs font-bold uppercase tracking-widest hover:bg-stone-50 transition">
                    View Clinical Breakdown <i class="fas fa-chevron-down ml-2"></i>
                </button>
                
                <div id="full-report" class="hidden spa-card p-8 text-left space-y-6">
                    <p id="result-desc" class="text-stone-500 text-sm leading-loose">Description...</p>
                    
                    <div class="space-y-4 pt-4 border-t border-stone-100">
                        <div>
                            <div class="flex justify-between text-xs font-bold uppercase text-stone-400 mb-1"><span>Exhaustion Level</span><span id="val-exhaustion">0%</span></div>
                            <div class="h-2 bg-stone-100 rounded-full"><div id="bar-exhaustion" class="h-full bg-sage-main rounded-full" style="width:0%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs font-bold uppercase text-stone-400 mb-1"><span>Cynicism Score</span><span id="val-cynicism">0%</span></div>
                            <div class="h-2 bg-stone-100 rounded-full"><div id="bar-cynicism" class="h-full bg-ink-text rounded-full" style="width:0%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs font-bold uppercase text-stone-400 mb-1"><span>Efficacy Gap</span><span id="val-efficacy">0%</span></div>
                            <div class="h-2 bg-stone-100 rounded-full"><div id="bar-efficacy" class="h-full bg-clay-accent rounded-full" style="width:0%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs font-bold uppercase text-stone-400 mb-1"><span>Detachment</span><span id="val-detachment">0%</span></div>
                            <div class="h-2 bg-stone-100 rounded-full"><div id="bar-detachment" class="h-full bg-stone-400 rounded-full" style="width:0%"></div></div>
                        </div>
                    </div>
                </div>

                <div class="flex gap-4 pt-4">
                    <button onclick="shareResult()" class="btn-cta px-6 py-4 rounded-xl flex-1 text-xs font-bold uppercase tracking-widest">
                        Share Status
                    </button>
                    <a href="arcade.html" class="bg-white border border-stone-300 text-ink-text px-6 py-4 rounded-xl flex-1 text-xs font-bold uppercase tracking-widest hover:bg-stone-50 text-center">
                        Recovery Arcade
                    </a>
                </div>
            </div>

        </div>

    </main>

    <script type="module">
        // ================= CONFIG =================
        // Scores: Ex (Exhaustion), Cy (Cynicism), Ef (Efficacy - Low is bad)
        const questions = [
            { q: "How do you feel on Sunday night?", cat: "Anticipation",
              a: [
                  { text: "Fine. Ready for the week.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "Mild anxiety (The Sunday Scaries).", scores: { Ex: 10, Cy: 5, Ef: 0 } },
                  { text: "Pure, undiluted dread.", scores: { Ex: 25, Cy: 20, Ef: 10 } }
              ] 
            },
            { q: "When you receive a new email notification, you...", cat: "Reaction",
              a: [
                  { text: "Check it and handle it.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "Feel a spike of rage.", scores: { Ex: 10, Cy: 25, Ef: 0 } },
                  { text: "Don't even look. I'm numb.", scores: { Ex: 20, Cy: 10, Ef: 20 } }
              ] 
            },
            { q: "How is your sleep quality?", cat: "Physical",
              a: [
                  { text: "I sleep like a baby.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "I wake up tired no matter what.", scores: { Ex: 25, Cy: 5, Ef: 10 } },
                  { text: "I dream about spreadsheets.", scores: { Ex: 15, Cy: 15, Ef: 0 } }
              ] 
            },
            { q: "Your opinion of your coworkers is...", cat: "Social",
              a: [
                  { text: "They're great/fine.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "They are incompetent obstacles.", scores: { Ex: 5, Cy: 25, Ef: 5 } },
                  { text: "I don't have the energy to care.", scores: { Ex: 20, Cy: 10, Ef: 20 } }
              ] 
            },
            { q: "How productive do you feel lately?", cat: "Efficacy",
              a: [
                  { text: "I'm crushing it.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "I'm working hard but achieving nothing.", scores: { Ex: 15, Cy: 10, Ef: 25 } },
                  { text: "I do the bare minimum to not get fired.", scores: { Ex: 5, Cy: 20, Ef: 20 } }
              ] 
            },
            { q: "Your main motivation for working is...", cat: "Driver",
              a: [
                  { text: "I enjoy the challenge.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "Money and survival. That's it.", scores: { Ex: 10, Cy: 15, Ef: 10 } },
                  { text: "Fear of failure.", scores: { Ex: 20, Cy: 5, Ef: 15 } }
              ] 
            },
            { q: "Small problems at work make you...", cat: "Resilience",
              a: [
                  { text: "Solve them.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "Want to scream.", scores: { Ex: 15, Cy: 25, Ef: 5 } },
                  { text: "Want to cry.", scores: { Ex: 25, Cy: 5, Ef: 15 } }
              ] 
            },
            { q: "After work, you have energy for...", cat: "Recovery",
              a: [
                  { text: "Hobbies, friends, gym.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "Maybe Netflix, maybe sleep.", scores: { Ex: 15, Cy: 5, Ef: 5 } },
                  { text: "Staring at the wall.", scores: { Ex: 30, Cy: 10, Ef: 20 } }
              ] 
            },
            { q: "What is your caffeine intake?", cat: "Substance",
              a: [
                  { text: "Normal (1-2 cups).", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "It doesn't affect me anymore.", scores: { Ex: 20, Cy: 0, Ef: 10 } },
                  { text: "I run on anxiety, not coffee.", scores: { Ex: 25, Cy: 5, Ef: 5 } }
              ] 
            },
            { q: "When someone asks 'How's work?', you say...", cat: "Identity",
              a: [
                  { text: "'It's good!' (and mean it).", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "'Busy.' (Code for: help me).", scores: { Ex: 10, Cy: 10, Ef: 5 } },
                  { text: "I change the subject immediately.", scores: { Ex: 5, Cy: 20, Ef: 10 } }
              ] 
            },
            { q: "You feel like your work...", cat: "Purpose",
              a: [
                  { text: "Matters.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "Is pointless busywork.", scores: { Ex: 5, Cy: 30, Ef: 20 } },
                  { text: "Is slowly killing me.", scores: { Ex: 25, Cy: 20, Ef: 10 } }
              ] 
            },
            { q: "How often do you fantasize about quitting?", cat: "Escape",
              a: [
                  { text: "Rarely.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "Every Monday.", scores: { Ex: 10, Cy: 15, Ef: 5 } },
                  { text: "I have a draft resignation letter saved.", scores: { Ex: 10, Cy: 30, Ef: 10 } }
              ] 
            },
            { q: "Finally, be honest: Are you okay?", cat: "Self-Check",
              a: [
                  { text: "Actually, yes.", scores: { Ex: 0, Cy: 0, Ef: 0 } },
                  { text: "I'm holding it together.", scores: { Ex: 15, Cy: 5, Ef: 10 } },
                  { text: "No.", scores: { Ex: 25, Cy: 25, Ef: 25 } }
              ] 
            }
        ];

        const archetypes = {
            "CrispyFried": {
                title: "Crispy Fried",
                subtitle: "System Failure Imminent.",
                summary: "You are not just tired; you are structurally unsound. You are running on fumes of fumes.",
                desc: "Extremely High Exhaustion. Your battery isn't just empty; it's corroded. You have surpassed the limits of human productivity and entered survival mode. Immediate rest is not a luxury; it is a medical necessity."
            },
            "Zombie": {
                title: "High-Functioning Zombie",
                subtitle: "The lights are on, but nobody's home.",
                summary: "You get the job done, but you feel absolutely nothing while doing it.",
                desc: "High Detachment, Moderate Exhaustion. You have automated your life to survive the stress. You are efficient, reliable, and completely dead inside. This is a defense mechanism against emotional overwhelm."
            },
            "Resentment": {
                title: "The Resentment Engine",
                subtitle: "Fueled by pure rage.",
                summary: "You aren't tired; you are angry. You despise the incompetence around you.",
                desc: "High Cynicism. You view your workplace as a circus and your coworkers as the clowns. This anger gives you energy, but it is toxic energy that is slowly poisoning your worldview."
            },
            "SundayScaries": {
                title: "The Sunday Scaries",
                subtitle: "Living for the weekend.",
                summary: "You are in the early stages. You dread the work week, but you recover by Friday.",
                desc: "Moderate scores across the board. You aren't fully burned out yet, but you are walking the line. You have a distinct 'Work Self' and 'Real Self,' and the transition between them is becoming painful."
            },
            "HustleBot": {
                title: "The Hustle Bot",
                subtitle: "\"I'll sleep when I'm dead.\"",
                summary: "You think burnout is a mindset. You are working hard, but your efficiency is dropping.",
                desc: "High Exhaustion, Low Efficacy Gap. You are trying to outrun the burnout by working harder. It isn't working. You are making more mistakes than you realize because your brain is fogged."
            },
            "Drifter": {
                title: "The Detached Drifter",
                subtitle: "Quiet Quitting Champion.",
                summary: "You checked out months ago. You are physically present, but spiritually at the beach.",
                desc: "High Efficacy Gap, High Cynicism. You have realized the work doesn't matter, so you have stopped trying. This protects your energy, but leaves you feeling purposeless."
            },
            "Zen": {
                title: "The Zen Master",
                subtitle: "Suspiciously Healthy.",
                summary: "You have boundaries. You drink water. You close your laptop at 5 PM. Teach us.",
                desc: "Low scores. You have a healthy relationship with labor. You understand that you are not your job. Keep doing what you're doing."
            }
        };

        // ================= LOGIC =================
        let currentQ = 0;
        let totalScores = { Ex: 0, Cy: 0, Ef: 0 };
        let startTime = 0;

        window.startQuiz = function() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('quiz-interface').classList.remove('hidden');
            startTime = Date.now();
            updateTimer();
            renderQuestion();
        }

        window.shareResult = function() {
            if(navigator.share) {
                navigator.share({ title: "My Burnout Score", text: "My diagnosis is: " + document.getElementById('result-title').innerText, url: window.location.href });
            } else {
                alert("Copied to clipboard.");
            }
        }

        function renderQuestion() {
            if (currentQ >= questions.length) {
                finishQuiz();
                return;
            }

            const q = questions[currentQ];
            document.getElementById('q-category').innerText = q.cat;
            document.getElementById('question-text').innerText = q.q;
            document.getElementById('progress-bar').style.width = ((currentQ / questions.length) * 100) + "%";

            const container = document.getElementById('options-container');
            container.innerHTML = '';

            q.a.forEach((opt) => {
                const btn = document.createElement('button');
                btn.className = "btn-option w-full p-6 text-left rounded-xl text-lg font-medium text-ink-text block";
                btn.innerText = opt.text;
                btn.onclick = () => handleAnswer(opt.scores);
                container.appendChild(btn);
            });
        }

        function handleAnswer(scores) {
            totalScores.Ex += scores.Ex;
            totalScores.Cy += scores.Cy;
            totalScores.Ef += scores.Ef;
            currentQ++;
            renderQuestion();
        }

        function finishQuiz() {
            const durationSec = ((Date.now() - startTime) / 1000).toFixed(0);
            
            // Determine Archetype
            let resultKey = "Zen";
            const { Ex, Cy, Ef } = totalScores;

            if (Ex > 180 && Cy > 100) resultKey = "CrispyFried";
            else if (Ex > 150 && Ef < 50) resultKey = "HustleBot";
            else if (Cy > 150) resultKey = "Resentment";
            else if (Ef > 120 && Cy > 100) resultKey = "Drifter";
            else if (Ex > 100 && Cy < 50 && Ef > 100) resultKey = "Zombie";
            else if (Ex > 80 || Cy > 80) resultKey = "SundayScaries";
            else resultKey = "Zen";

            const data = archetypes[resultKey];

            // UI Render
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            document.getElementById('result-title').innerText = data.title;
            document.getElementById('result-subtitle').innerText = data.subtitle;
            document.getElementById('result-summary').innerText = data.summary;
            document.getElementById('result-desc').innerText = data.desc;

            // Render Metrics (Normalized 0-100%)
            document.getElementById('val-exhaustion').innerText = Math.min(100, Math.floor(Ex/2.5)) + "%";
            document.getElementById('bar-exhaustion').style.width = Math.min(100, Math.floor(Ex/2.5)) + "%";

            document.getElementById('val-cynicism').innerText = Math.min(100, Math.floor(Cy/2)) + "%";
            document.getElementById('bar-cynicism').style.width = Math.min(100, Math.floor(Cy/2)) + "%";

            document.getElementById('val-efficacy').innerText = Math.min(100, Math.floor(Ef/1.5)) + "%";
            document.getElementById('bar-efficacy').style.width = Math.min(100, Math.floor(Ef/1.5)) + "%";

            // Detachment is a mix of Cy and Ef
            const detachment = Math.floor((Cy + Ef) / 4);
            document.getElementById('val-detachment').innerText = detachment + "%";
            document.getElementById('bar-detachment').style.width = detachment + "%";

            // Save Data
            const payload = {
                testId: "burnout_diagnostic",
                timestamp: new Date().toISOString(),
                archetype: resultKey,
                metrics: {
                    exhaustion_level: Ex,
                    cynicism_score: Cy,
                    efficacy_gap: Ef,
                    detachment_index: detachment,
                    recovery_need: Ex > 150 ? "Urgent" : (Ex > 80 ? "High" : "Maintenance"),
                    time_taken: parseInt(durationSec)
                }
            };

            if (window.saveTestResult) {
                try {
                    window.saveTestResult(payload);
                    console.log("Saved Burnout Profile");
                } catch(e) { console.warn("Save Error", e); }
            } else {
                console.log("Mock Save:", payload);
            }
        }

        function updateTimer() {
            if (document.getElementById('quiz-interface').classList.contains('hidden')) return;
            const now = Date.now();
            const diff = Math.floor((now - startTime) / 1000);
            const m = Math.floor(diff / 60).toString().padStart(2, '0');
            const s = (diff % 60).toString().padStart(2, '0');
            document.getElementById('timer-display').innerText = `${m}:${s}`;
            requestAnimationFrame(updateTimer);
        }
    </script>
</body>
</html>