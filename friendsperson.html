<!DOCTYPE html>
<html lang="en">
<head>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-ML3F7KLZ');</script>
  <script type="module" src="firebase-config.js"></script>
  <script src="game-engine.js"></script> 
  <script src="components.js" defer></script>
<script type="module" src="assets/ux-core.js"></script> 
<link rel="icon" type="image/png" sizes="192x192" href="assets/favicon-192.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="The Ultimate Friends Personality Quiz. Find out which character matches your psychology.">
  <link rel="manifest" href="/site.webmanifest">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; style-src 'self' 'unsafe-inline' https:; script-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:;">
  <script src="https://cdn.tailwindcss.com"></script>

  <title>The One Where You Find Your True Self | QuizRealm</title>
  <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
  <link rel="shortcut icon" href="assets/favicon.ico">
  <meta name="theme-color" content="#020617">
  
  <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
      /* =========================================
         1. GLOBAL RESET & THEME
         ========================================= */
      :root {
          --bg-dark: #0f0f13; 
          --nav-bg: #0b0b0e;  
          --accent: #a78bfa;  
          --text-main: #ffffff;
          --text-mute: #9ca3af;
          
          /* Game Colors */
          --glass: rgba(30, 30, 46, 0.85);
          --monica-red: #ff4238;
          --phoebe-yellow: #ffca28;
          --joey-blue: #42a5f5;
          --rachel-green: #66bb6a;

          /* Share Card Colors */
          --storeBlue: #66c0f4;
          --storeGreen: #a4d007;
          --storeHighlight: #1b2838;
      }

      * { box-sizing: border-box; }

      body {
          background-color: var(--bg-dark);
          background-image: 
              radial-gradient(circle at 10% 20%, rgba(66, 165, 245, 0.1) 0%, transparent 20%),
              radial-gradient(circle at 90% 80%, rgba(255, 66, 56, 0.1) 0%, transparent 20%);
          color: var(--text-main);
          font-family: 'Poppins', sans-serif;
          margin: 0;
          display: flex;
          flex-direction: column;
          min-height: 100vh;
      }

      a { text-decoration: none; transition: 0.2s; }

      /* =========================================
         2. HEADER STYLES
         ========================================= */
      .site-header {
          background-color: var(--nav-bg);
          border-bottom: 1px solid rgba(255,255,255,0.05);
          position: sticky;
          top: 0;
          z-index: 1000;
          box-shadow: 0 4px 20px rgba(0,0,0,0.4);
      }
      .top-bar {
          background: linear-gradient(90deg, #1e1b4b, #000);
          color: #e0e7ff;
          font-size: 0.8rem;
          padding: 6px 0;
          text-align: center;
          font-weight: 600;
          letter-spacing: 0.5px;
      }
      .header-main {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 15px 30px;
          max-width: 1200px;
          margin: 0 auto;
      }
      .brand-logo {
          font-weight: 800;
          font-size: 1.2rem;
          color: #fff;
          letter-spacing: 1px;
          display: flex;
          align-items: center;
          gap: 10px;
      }
      .brand-logo i { color: var(--accent); }
      .nav-links { display: flex; gap: 20px; align-items: center; }
      .nav-item {
          color: var(--text-mute); font-size: 0.9rem; font-weight: 500;
          display: flex; align-items: center; gap: 6px;
      }
      .nav-item:hover { color: #fff; }
      .nav-item.active { color: var(--accent); }
      .profile-badge {
          background: rgba(255,255,255,0.1); padding: 6px 15px; border-radius: 20px;
          font-size: 0.85rem; color: #fff; display: flex; align-items: center; gap: 8px;
          border: 1px solid rgba(255,255,255,0.1);
      }
      @media (max-width: 768px) { .nav-links { display: none; } }

      /* =========================================
         3. GAME UI STYLES
         ========================================= */
      .main-wrapper {
          flex: 1; display: flex; flex-direction: column; align-items: center;
          padding: 40px 20px; width: 100%;
      }
      .game-container {
          width: 100%; max-width: 800px; position: relative; z-index: 10;
      }
      .glass-card {
          background: var(--glass);
          backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
          border: 1px solid rgba(255, 255, 255, 0.08);
          border-radius: 24px;
          box-shadow: 0 20px 50px rgba(0,0,0,0.5);
          overflow: hidden;
          transition: all 0.3s ease;
      }

      /* Hero/Intro */
      .hero-image-container { height: 260px; position: relative; overflow: hidden; }
      .hero-img {
          width: 100%; height: 100%; object-fit: cover;
          mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
          -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
      }
      .intro-content { padding: 0 40px 40px 40px; text-align: center; }
      h1.game-title {
          font-family: 'Permanent Marker', cursive; font-size: 3rem;
          margin: -30px 0 20px 0; text-shadow: 2px 2px 0px rgba(0,0,0,0.8);
          position: relative; z-index: 2;
      }
      .btn-start {
          background: linear-gradient(135deg, var(--monica-red), #d32f2f);
          color: white; border: none; padding: 16px 50px;
          font-size: 1.2rem; font-weight: 800; border-radius: 50px;
          cursor: pointer; text-transform: uppercase; letter-spacing: 2px;
          transition: transform 0.2s, box-shadow 0.2s;
          box-shadow: 0 5px 20px rgba(255, 66, 56, 0.4);
          display: inline-flex; align-items: center; gap: 10px;
      }
      .btn-start:hover { transform: translateY(-3px) scale(1.02); }

      /* Quiz Area */
      #quiz-screen { display: none; padding: 40px; }
      .progress-track { background: rgba(255,255,255,0.1); height: 6px; border-radius: 3px; margin-bottom: 30px; }
      .progress-fill { height: 100%; background: linear-gradient(90deg, var(--monica-red), var(--phoebe-yellow)); width: 0%; transition: width 0.5s ease; }
      .question-text { font-size: 1.6rem; font-weight: 600; margin-bottom: 40px; line-height: 1.4; animation: fadeIn 0.5s ease; min-height: 80px; }
      .options-grid { display: grid; gap: 15px; grid-template-columns: 1fr; }
      @media(min-width: 600px) { .options-grid { grid-template-columns: 1fr 1fr; } }
      .option-card {
          background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);
          padding: 20px; border-radius: 12px; cursor: pointer; transition: 0.2s;
          display: flex; align-items: center; color: #ddd;
      }
      .option-card:hover { background: rgba(255,255,255,0.08); transform: translateX(5px); color: #fff; border-color: rgba(255,255,255,0.3); }

      /* Results */
      #result-screen { display: none; padding: 0; }
      .result-header { background: linear-gradient(to bottom right, #20202e, #15151a); padding: 40px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); }
      .result-name {
          font-family: 'Permanent Marker', cursive; font-size: 3.5rem; margin: 0;
          background: linear-gradient(0deg, #fff, #bbb); -webkit-background-clip: text;
          background-clip: text; -webkit-text-fill-color: transparent; color: transparent;
      }
      .result-body { padding: 40px; background: rgba(0,0,0,0.2); }
      .psych-box { background: rgba(255,255,255,0.03); border-left: 3px solid var(--joey-blue); padding: 25px; border-radius: 0 10px 10px 0; margin-bottom: 30px; }
      .action-row { display: flex; gap: 15px; justify-content: center; margin-top: 20px; }
      .share-btn { background: #fff; color: #000; padding: 12px 30px; border-radius: 8px; font-weight: 700; cursor: pointer; border: none; }
      
      @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

      /* =========================================
         4. SHARE CARD STYLES
         ========================================= */
      .share-card-container {
          background: var(--storeHighlight);
          border: 1px solid rgba(255, 255, 255, 0.1);
          border-radius: 12px;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
          padding: 20px;
          margin-top: 20px;
      }
      .btn-play {
          background: linear-gradient(90deg, var(--storeBlue) 0%, #1a44c2 100%);
          transition: all 0.2s;
          color: white;
          padding: 10px 15px;
          font-family: 'Poppins', sans-serif;
          border-radius: 8px;
          cursor: pointer;
          text-transform: uppercase;
          border: none;
          font-weight: 600;
          font-size: 0.9rem;
      }
      .btn-play:hover { background: linear-gradient(90deg, #66c0f4 0%, #295bcc 100%); }
      .feedback-msg { transition: opacity 0.3s; color: var(--storeGreen); font-size: 0.75rem; margin-top: 5px; text-align: center; }

      /* Footer */
      .site-footer {
          background-color: #000; border-top: 1px solid #222;
          padding: 60px 20px 20px; color: #6b7280; font-size: 0.9rem;
      }
      .footer-content {
          max-width: 1200px; margin: 0 auto; display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; text-align: center;
      }
      .footer-col h3 { color: #fff; font-size: 1rem; margin-bottom: 20px; }
      .footer-links { list-style: none; padding: 0; display: flex; flex-direction: column; gap: 10px; }
      .footer-links a { color: #6b7280; } .footer-links a:hover { color: #fff; }
      .social-icons { display: flex; justify-content: center; gap: 15px; margin-top: 15px; }
      .social-btn {
          width: 35px; height: 35px; background: rgba(255,255,255,0.1);
          border-radius: 6px; display: flex; align-items: center; justify-content: center;
          color: #ccc; transition: 0.2s;
      }
      .social-btn:hover { background: var(--accent); color: #fff; }
      .copyright { margin-top: 60px; text-align: center; border-top: 1px solid #222; padding-top: 20px; font-size: 0.8rem; }
  </style>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ML3F7KLZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

  <quiz-header></quiz-header>

  <div class="main-wrapper">
      <div class="game-container glass-card">
          
          <div id="intro-screen">
              <div class="hero-image-container">
                  <img src="assets/friendsperson.webp" alt="Friends Cast" class="hero-img">
              </div>
              <div class="intro-content">
                  <h1 class="game-title">The One Where You Find Your True Self</h1>
                  <p style="color:#aaa; font-size:1.1rem; max-width:600px; margin:0 auto 30px;">
                      Forget simple trivia. This is a <strong>20-point psychological analysis</strong> calibrated to match your subconscious with the archetypes of Central Perk.
                  </p>
                  
                  <button class="btn-start" onclick="startQuiz()">Enter Central Perk <i class="fas fa-coffee" style="margin-left:10px;"></i></button>
                  <p style="margin-top:15px; margin-bottom: 30px; font-size:0.8rem; color:#555;">Takes 2 minutes • 100% Accurate</p>

                  <div class="share-card-container mx-auto max-w-sm">
                      <h4 class="text-white font-bold text-sm mb-2 flex items-center justify-center gap-2 border-b border-white/10 pb-2">
                          <i class="fas fa-users" style="color:var(--storeBlue);"></i> Challenge Your Group
                      </h4>
                      <div class="flex gap-2">
                          <button id="start-native-btn" class="flex-1 btn-play shadow-md flex items-center justify-center gap-2 text-xs">
                              <i class="fas fa-share-square"></i> Share Quiz
                          </button>
                          <button id="start-copy-btn" class="flex-grow-0 px-3 flex items-center justify-center rounded-md bg-white/10 text-gray-300 hover:bg-white/20 transition" title="Copy Link">
                              <i class="fas fa-copy"></i>
                          </button>
                      </div>
                      <div id="start-copy-feedback" class="feedback-msg" style="opacity: 0;">Link copied!</div>
                  </div>
                  </div>
          </div>

          <div id="quiz-screen">
              <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                  <span style="font-size:0.9rem; color:#777; font-weight:600;">PSYCH EVALUATION</span>
                  <span id="q-tracker" style="font-size:0.9rem; color:var(--phoebe-yellow);">01 / 20</span>
              </div>
              <div class="progress-track"><div class="progress-fill" id="progress-bar"></div></div>
              <div class="question-text" id="question-text">Loading...</div>
              <div class="options-grid" id="options-container"></div>
          </div>

          <div id="result-screen">
              <div class="result-header">
                  <div style="color:var(--phoebe-yellow); text-transform:uppercase; letter-spacing:3px; font-size:0.8rem; font-weight:800; margin-bottom:10px;">Your Archetype</div>
                  <h1 class="result-name" id="result-name">Result</h1>
                  <div id="result-tags" style="display:flex; justify-content:center; gap:10px; margin-top:15px; flex-wrap:wrap;"></div>
              </div>
              <div class="result-body">
                  <div class="psych-box">
                      <h3 style="margin-top:0; font-size:1.1rem; color:var(--joey-blue); text-transform:uppercase;">Psychological Profile</h3>
                      <p id="result-desc" style="line-height:1.8; color:#d0d0d0; margin-bottom:0;">Desc</p>
                  </div>
                  <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:30px;">
                      <div>
                          <h4 style="margin:0 0 5px 0; color:var(--rachel-green)"><i class="fas fa-bolt"></i> Superpower</h4>
                          <p id="result-power" style="margin:0; font-size:0.9rem; color:#888;">Trait</p>
                      </div>
                      <div>
                          <h4 style="margin:0 0 5px 0; color:var(--monica-red)"><i class="fas fa-exclamation-circle"></i> Kryptonite</h4>
                          <p id="result-kryptonite" style="margin:0; font-size:0.9rem; color:#888;">Trait</p>
                      </div>
                  </div>

                  <div class="share-card-container">
                      <h4 class="text-white font-bold text-lg mb-3 flex items-center gap-2 border-b border-white/10 pb-2">
                          <i class="fas fa-share-alt" style="color:var(--storeBlue);"></i> Share Your Result
                      </h4>
                      <p id="result-share-text" class="text-sm text-gray-400 mb-4">Show off your persona!</p>

                      <div class="flex flex-col md:flex-row gap-3">
                          <button id="res-native-btn" class="flex-1 btn-play shadow-md flex items-center justify-center gap-2">
                              <i class="fas fa-share-square"></i> Share Now
                          </button>
                          <button id="res-copy-btn" class="flex-grow-0 w-12 h-12 flex items-center justify-center rounded-md bg-white/10 text-gray-300 hover:bg-white/20 transition" title="Copy Link">
                              <i class="fas fa-copy text-lg"></i>
                          </button>
                      </div>
                      <div id="res-copy-feedback" class="feedback-msg" style="opacity: 0;">Link copied!</div>
                  </div>
                  <div class="action-row">
                      <button class="share-btn" onclick="location.reload()">Retake Quiz</button>
                  </div>
              </div>
          </div>
      </div>

      <article class="seo-section" style="max-width: 800px; margin-top: 60px; color: #888; line-height: 1.8; padding: 0 20px; text-align: center;">
          <h2 style="color: #fff; margin-bottom: 20px;">Why This Isn't Just Another "Friends" Quiz</h2>
          <p>Our algorithm analyzes <strong>conflict resolution, defense mechanisms, and social energy</strong> to determine which member of the gang truly matches your soul.</p>
      </article>

  </div>

  <quiz-footer></quiz-footer>

  <script>
      // --- SHARE LOGIC ---
      function initShareButtons() {
          // 1. SETUP START SCREEN SHARE
          const startUrl = window.location.href;
          const startTitle = "The Ultimate Friends Persona Quiz";
          const startMsg = "Who is the 'Monica' of your group? Take this psych-profile quiz to find out which Friends character matches your soul! ➡️ " + startUrl;

          const startNativeBtn = document.getElementById('start-native-btn');
          const startCopyBtn = document.getElementById('start-copy-btn');
          
          if (navigator.share) {
              startNativeBtn.onclick = () => {
                  navigator.share({ title: startTitle, text: startMsg, url: startUrl })
                  .catch(err => { if(err.name !== 'AbortError') console.error(err); });
              };
          } else {
              startNativeBtn.onclick = () => copyText(startUrl, 'start-copy-feedback');
              startNativeBtn.innerHTML = '<i class="fas fa-copy"></i> Copy Link';
          }
          startCopyBtn.onclick = () => copyText(startUrl, 'start-copy-feedback');
      }

      function setupResultShare(charName, power) {
          // 2. SETUP RESULT SCREEN SHARE (Called after quiz)
          const url = window.location.href;
          const title = `I am ${charName}! - Friends Persona Quiz`;
          const msg = `I got ${charName} (${power})! Which Friends character matches YOUR psychology? Take the quiz! ➡️ ` + url;

          const resNativeBtn = document.getElementById('res-native-btn');
          const resCopyBtn = document.getElementById('res-copy-btn');
          document.getElementById('result-share-text').innerText = `You are ${charName}. Tell the world!`;

          if (navigator.share) {
              resNativeBtn.onclick = () => {
                  navigator.share({ title: title, text: msg, url: url })
                  .catch(err => { if(err.name !== 'AbortError') console.error(err); });
              };
          } else {
              resNativeBtn.onclick = () => copyText(url, 'res-copy-feedback');
              resNativeBtn.innerHTML = '<i class="fas fa-copy"></i> Copy Link';
          }
          resCopyBtn.onclick = () => copyText(url, 'res-copy-feedback');
      }

      function copyText(text, feedbackId) {
          navigator.clipboard.writeText(text).then(() => {
              const el = document.getElementById(feedbackId);
              el.style.opacity = 1;
              setTimeout(() => el.style.opacity = 0, 2000);
          }).catch(err => console.error(err));
      }

      // Initialize Start Screen buttons immediately
      document.addEventListener('DOMContentLoaded', initShareButtons);


      // --- QUIZ DATA ---
      const questions = [
          { q: "A friend cancels plans at the last minute. You:", a: [
              { txt: "Feel relieved but pretend to be annoyed.", val: "A" },
              { txt: "Freak out because the schedule is ruined.", val: "B" },
              { txt: "Assume the universe wanted you to stay home.", val: "C" },
              { txt: "Ask if they are still going to eat that pizza.", val: "D" },
              { txt: "Make a sarcastic comment about their reliability.", val: "E" },
              { txt: "Analyze *why* they cancelled.", val: "F" }
          ]},
          { q: "Your dream home interior is:", a: [
              { txt: "Trendy, chic, and slightly messy.", val: "A" },
              { txt: "Immaculate, labeled, and organized.", val: "B" },
              { txt: "Eclectic, colorful, and full of weird art.", val: "C" },
              { txt: "Comfortable chairs and a massive TV.", val: "D" },
              { txt: "Doesn't matter, as long as the rent is cheap.", val: "E" },
              { txt: "Full of historical artifacts and fossils.", val: "F" }
          ]},
          { q: "In a heated argument, your strategy is:", a: [
              { txt: "Cry or storm out dramatically.", val: "A" },
              { txt: "Provide evidence why you are right.", val: "B" },
              { txt: "Cleanse the aura with sage.", val: "C" },
              { txt: "Ask 'How you doin'?' to distract them.", val: "D" },
              { txt: "Make a joke to break the tension.", val: "E" },
              { txt: "Correct their grammar.", val: "F" }
          ]},
          { q: "Your view on sharing food:", a: [
              { txt: "Sure, if I can have some of yours.", val: "A" },
              { txt: "Only if you use a serving spoon.", val: "B" },
              { txt: "Of course, food is for everyone!", val: "C" },
              { txt: "JOEY DOESN'T SHARE FOOD!", val: "D" },
              { txt: "Take it, I wasn't hungry anyway.", val: "E" },
              { txt: "Did you pay for your share?", val: "F" }
          ]},
          { q: "When you receive bad news, you:", a: [
              { txt: "Go shopping to feel better.", val: "A" },
              { txt: "Start cleaning aggressively.", val: "B" },
              { txt: "Write a sad song on a guitar.", val: "C" },
              { txt: "Hug a stuffed animal (or a duck).", val: "D" },
              { txt: "Use humor as a defense mechanism.", val: "E" },
              { txt: "Mope and say 'I'm fine' in a high-pitched voice.", val: "F" }
          ]},
          { q: "Your ideal romantic partner is:", a: [
              { txt: "Someone who challenges you.", val: "A" },
              { txt: "Someone who follows your rules.", val: "B" },
              { txt: "Someone unconventional and artsy.", val: "C" },
              { txt: "Someone who loves to have fun.", val: "D" },
              { txt: "Someone who laughs at your jokes.", val: "E" },
              { txt: "Someone with similar intellectual interests.", val: "F" }
          ]},
          { q: "A stranger insults you. You:", a: [
              { txt: "Gossip about them later.", val: "A" },
              { txt: "Confront them loudly.", val: "B" },
              { txt: "Put a curse on them.", val: "C" },
              { txt: "Look confused.", val: "D" },
              { txt: "Roast them instantly.", val: "E" },
              { txt: "Explain why their insult is factually incorrect.", val: "F" }
          ]},
          { q: "Your biggest fear is:", a: [
              { txt: "Looking uncool.", val: "A" },
              { txt: "Losing control.", val: "B" },
              { txt: "Selling out to 'The Man'.", val: "C" },
              { txt: "Ghosts (or running out of sandwiches).", val: "D" },
              { txt: "Commitment.", val: "E" },
              { txt: "Being wrong.", val: "F" }
          ]},
          { q: "At a party, you are found:", a: [
              { txt: "Being the center of attention.", val: "A" },
              { txt: "Hosting and refilling drinks.", val: "B" },
              { txt: "Talking to a plant in the corner.", val: "C" },
              { txt: "By the buffet table.", val: "D" },
              { txt: "Making awkward small talk.", val: "E" },
              { txt: "Drunk on wine talking about work.", val: "F" }
          ]},
          { q: "You find a wallet on the street. You:", a: [
              { txt: "Check if it’s a designer brand.", val: "A" },
              { txt: "Hand it to the police immediately.", val: "B" },
              { txt: "Check the karma vibe before touching it.", val: "C" },
              { txt: "Check for cash, then return it.", val: "D" },
              { txt: "Joke about keeping it, then return it.", val: "E" },
              { txt: "Find the owner to lecture them on safety.", val: "F" }
          ]},
          { q: "Your approach to cooking:", a: [
              { txt: "I messed up the trifle...", val: "A" },
              { txt: "Follow the recipe exactly. I am the chef.", val: "B" },
              { txt: "Throw in whatever feels right.", val: "C" },
              { txt: "I’m better at eating than cooking.", val: "D" },
              { txt: "Can I just order takeout?", val: "E" },
              { txt: "Cooking is chemistry.", val: "F" }
          ]},
          { q: "When keeping a secret:", a: [
              { txt: "I tell one person, but they won't tell!", val: "A" },
              { txt: "I take it to the grave.", val: "B" },
              { txt: "I forget what the secret was.", val: "C" },
              { txt: "I accidentally blurt it out.", val: "D" },
              { txt: "I make it sound like a joke so no one believes me.", val: "E" },
              { txt: "I get physically uncomfortable lying.", val: "F" }
          ]},
          { q: "Your career goal is:", a: [
              { txt: "Fashion or something high-profile.", val: "A" },
              { txt: "Management and organization.", val: "B" },
              { txt: "Anything creative and flexible.", val: "C" },
              { txt: "Acting or entertainment.", val: "D" },
              { txt: "Something stable with data (that no one understands).", val: "E" },
              { txt: "Science or academia.", val: "F" }
          ]},
          { q: "Deep down, you crave:", a: [
              { txt: "Independence.", val: "A" },
              { txt: "Perfection.", val: "B" },
              { txt: "Freedom.", val: "C" },
              { txt: "Comfort.", val: "D" },
              { txt: "Acceptance.", val: "E" },
              { txt: "Validation.", val: "F" }
          ]},
          { q: "If you could have a superpower:", a: [
              { txt: "Flying (to travel).", val: "A" },
              { txt: "Super speed (to get more done).", val: "B" },
              { txt: "Talking to animals.", val: "C" },
              { txt: "Super strength.", val: "D" },
              { txt: "Invisibility (to avoid awkward moments).", val: "E" },
              { txt: "Mind reading.", val: "F" }
          ]},
          { q: "How do you handle change?", a: [
              { txt: "I adapt if it benefits me.", val: "A" },
              { txt: "I hate it unless I planned it.", val: "B" },
              { txt: "Life is change, man.", val: "C" },
              { txt: "I don't like things changing!", val: "D" },
              { txt: "I panic.", val: "E" },
              { txt: "I create a pros and cons list.", val: "F" }
          ]},
          { q: "Your fashion style is:", a: [
              { txt: "Stylish and current.", val: "A" },
              { txt: "Practical and neat.", val: "B" },
              { txt: "Vintage and eccentric.", val: "C" },
              { txt: "Casual (leather jackets/jerseys).", val: "D" },
              { txt: "Vests and button-downs.", val: "E" },
              { txt: "Tweeds and sweaters.", val: "F" }
          ]},
          { q: "When a friend succeeds, you:", a: [
              { txt: "Are happy, but slightly jealous.", val: "A" },
              { txt: "Throw them a party.", val: "B" },
              { txt: "Knew it would happen (psychic).", val: "C" },
              { txt: "Hug them tightly.", val: "D" },
              { txt: "Ask for a loan (joking).", val: "E" },
              { txt: "Remind them you helped.", val: "F" }
          ]},
          { q: "Your ideal vacation:", a: [
              { txt: "Paris or Milan.", val: "A" },
              { txt: "A scheduled tour of monuments.", val: "B" },
              { txt: "A retreat in the woods.", val: "C" },
              { txt: "London (or anywhere with good food).", val: "D" },
              { txt: "Yemen (just to get away).", val: "E" },
              { txt: "An archaeological dig site.", val: "F" }
          ]},
          { q: "What makes a person a 'good friend'?", a: [
              { txt: "They support your dreams.", val: "A" },
              { txt: "They are reliable and loyal.", val: "B" },
              { txt: "They accept your weirdness.", val: "C" },
              { txt: "They are always there to hang out.", val: "D" },
              { txt: "They handle your sarcasm.", val: "E" },
              { txt: "They have a long history with you.", val: "F" }
          ]}
      ];

      const results = {
          "A": { 
              title: "Rachel Green",
              tags: ["#Fashionista", "#GrowthMindset", "#Loyal"],
              desc: "You are the definition of personal evolution. You may have started out relying on others, but you've discovered a fierce independence and career savvy that shocks everyone. You feel things deeply, you love gossip, and while you might be a little dramatic, your heart is always in the right place.",
              power: "Incredible emotional intelligence and style.",
              kryptonite: "Returning gifts and being a little spoiled."
          },
          "B": { 
              title: "Monica Geller", 
              tags: ["#BossEnergy", "#CleanFreak", "#Hostess"],
              desc: "You are the glue. The host. The one who makes sure everyone is fed and safe. You have incredibly high standards for yourself and others, and chaos is your enemy. You might be competitive, but it comes from a place of wanting the best for everyone. You are the mother hen of your group.",
              power: "Unmatched organizational skills.",
              kryptonite: "Losing at anything (even Pictionary)."
          },
          "C": { 
              title: "Phoebe Buffay", 
              tags: ["#Wildcard", "#Mystic", "#FreeSpirit"],
              desc: "You are a true original. You see the world through a kaleidoscope of mysticism and wonder. You have street smarts hidden under layers of whimsy. You are brutally honest, fiercely principled, and you don't care about societal norms. You are the wildcard.",
              power: "Resilience and artistic creativity.",
              kryptonite: "Telling the brutal truth at the wrong time."
          },
          "D": { 
              title: "Joey Tribbiani", 
              tags: ["#Loyalist", "#Foodie", "#Charisma"],
              desc: "You are pure heart. You don't overthink things; you feel them. You are incredibly loyal, protective, and yes, you love food. You might not always get the complicated jokes, but your emotional intelligence is underrated. You are the friend everyone wants in their corner.",
              power: "Unconditional loyalty to friends.",
              kryptonite: "Complex math and sharing food."
          },
          "E": { 
              title: "Chandler Bing", 
              tags: ["#SarcasmKing", "#DefensiveWit", "#Stable"],
              desc: "You are the sharpest wit in the room. You use humor as a shield to protect a sensitive interior. You are observant, sarcastic, and perhaps a bit insecure, but once you commit to someone, you are the most stable and loving partner imaginable. You are the 'funny one'.",
              power: "Diffusing tension with humor.",
              kryptonite: "Awkward silences and commitment fears."
          },
          "F": { 
              title: "Ross Geller", 
              tags: ["#Intellectual", "#Romantic", "#DinosaurNerd"],
              desc: "You are the romantic intellectual. You value logic, science, and history, but your heart is a stormy ocean of passion. You can be stubborn and need to be 'right', but you are deeply sentimental. You are looking for a love that lasts forever, and you'll fight (and debate) for it.",
              power: "Deep knowledge and romantic gestures.",
              kryptonite: "Being fine. (You are not fine). And divorce."
          }
      };

      let currentQuestion = 0;
      let scores = { A:0, B:0, C:0, D:0, E:0, F:0 };

      function startQuiz() {
          document.getElementById('intro-screen').style.display = 'none';
          document.getElementById('quiz-screen').style.display = 'block';
          loadQuestion();
      }

      function loadQuestion() {
          const q = questions[currentQuestion];
          const tracker = document.getElementById('q-tracker');
          const txt = document.getElementById('question-text');
          const container = document.getElementById('options-container');

          tracker.innerText = `${String(currentQuestion + 1).padStart(2, '0')} / ${questions.length}`;
          txt.style.animation = 'none';
          txt.offsetHeight; 
          txt.style.animation = 'fadeIn 0.5s ease-in-out';
          txt.innerText = q.q;
          
          const progress = ((currentQuestion) / questions.length) * 100;
          document.getElementById('progress-bar').style.width = `${progress}%`;

          container.innerHTML = ''; 

          q.a.forEach((opt, index) => {
              const btn = document.createElement('div');
              btn.className = 'option-card';
              btn.innerText = opt.txt;
              btn.onclick = () => selectAnswer(opt.val);
              container.appendChild(btn);
          });
      }

      function selectAnswer(val) {
          scores[val]++;
          currentQuestion++;
          if (currentQuestion < questions.length) loadQuestion();
          else showResult();
      }

      function showResult() {
          let maxScore = 0;
          let winnerKey = 'A';
          for (const [key, value] of Object.entries(scores)) {
              if (value > maxScore) { maxScore = value; winnerKey = key; }
          }
          const data = results[winnerKey];
          document.getElementById('quiz-screen').style.display = 'none';
          document.getElementById('result-screen').style.display = 'block';
          
          document.getElementById('result-name').innerText = data.title;
          document.getElementById('result-desc').innerText = data.desc;
          document.getElementById('result-power').innerText = data.power;
          document.getElementById('result-kryptonite').innerText = data.kryptonite;

          const tagContainer = document.getElementById('result-tags');
          tagContainer.innerHTML = '';
          data.tags.forEach(tag => {
              const sp = document.createElement('span');
              sp.className = 'tag';
              sp.style.cssText = "background:rgba(255,255,255,0.1); padding:4px 10px; border-radius:15px; font-size:0.8rem; color:#ccc;";
              sp.innerText = tag;
              tagContainer.appendChild(sp);
          });

          // Trigger Result Share Logic
          setupResultShare(data.title, data.power);
      }
  </script>
</body>
</html>