<!DOCTYPE html>
<html lang="en">
<head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-ML3F7KLZ');</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Seduction Archetype • Identity Lab | QuizRealm</title>
    <meta name="description" content="Siren, Coquette, or Charmer? Discover your power dynamic in relationships. 13 Questions.">
    <meta name="theme-color" content="#2e1065">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="/components.js" defer></script>
    <script type="module" src="/game-engine.js"></script>
    <script type="module" src="/assets/ux-core.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        'serif': ['Playfair Display', 'serif'], 
                        'sans': ['Lato', 'sans-serif'] 
                    },
                    colors: { 
                        'luxe-bg': '#0f0518',
                        'luxe-panel': '#1a0b2e',
                        'luxe-gold': '#fbbf24', // Amber 400
                        'luxe-gold-dim': '#b45309',
                        'luxe-purple': '#2e1065'
                    },
                    backgroundImage: {
                        'velvet-gradient': 'radial-gradient(circle at center, #2e1065 0%, #0f0518 100%)'
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0f0518; color: #f3f4f6; font-family: 'Lato', sans-serif; overflow-x: hidden; }
        
        /* Gold Border Gradient */
        .border-gold {
            border: 1px solid transparent;
            background: linear-gradient(#1a0b2e, #1a0b2e) padding-box,
                        linear-gradient(45deg, #b45309, #fbbf24, #b45309) border-box;
        }

        /* Option Button Styling */
        .choice-btn {
            background: rgba(255, 255, 255, 0.03);
            border-left: 2px solid rgba(251, 191, 36, 0.2);
            transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .choice-btn:hover {
            background: linear-gradient(90deg, rgba(46, 16, 101, 0.6), transparent);
            border-left-color: #fbbf24;
            padding-left: 2rem;
        }

        /* Serif Italic Highlights */
        .italic-accent {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            color: #fbbf24;
        }

        /* Fade Animations */
        .fade-in-up { animation: fadeInUp 1s ease forwards; opacity: 0; transform: translateY(30px); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        /* Progress Bar Gold */
        .gold-progress {
            background: linear-gradient(90deg, #b45309, #fbbf24, #fff, #fbbf24, #b45309);
            background-size: 200% auto;
            animation: shine 3s linear infinite;
        }
        @keyframes shine { to { background-position: 200% center; } }
    </style>
</head>

<body class="flex flex-col min-h-screen bg-velvet-gradient selection:bg-luxe-gold selection:text-luxe-purple">
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ML3F7KLZ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <quiz-header></quiz-header>

    <main class="flex-grow w-full max-w-4xl mx-auto px-6 py-16">

        <div id="start-screen" class="text-center space-y-10 fade-in-up">
            
            <div class="relative w-24 h-24 mx-auto mb-8">
                <div class="absolute inset-0 border border-luxe-gold rounded-full opacity-20 animate-spin" style="animation-duration: 10s;"></div>
                <div class="absolute inset-0 flex items-center justify-center text-4xl text-luxe-gold">
                    <i class="fas fa-mask"></i>
                </div>
            </div>

            <div>
                <h1 class="font-serif text-5xl md:text-7xl text-white leading-none mb-6">
                    The <span class="italic-accent">Seduction</span><br>Archetype.
                </h1>
                <p class="text-slate-400 text-lg font-light max-w-xl mx-auto leading-relaxed">
                    Seduction is not about beauty; it is about <strong>power</strong>. <br>
                    Are you the hunter, the prize, or the mirror? <br>
                    <span class="text-luxe-gold text-xs uppercase tracking-widest mt-4 block">13 Questions • Psychological Profiling</span>
                </p>
            </div>

            <button onclick="window.startQuiz()" class="group relative inline-flex items-center justify-center px-10 py-4 overflow-hidden font-serif font-bold text-white transition duration-300 ease-out border-gold rounded-sm shadow-md">
                <span class="absolute inset-0 flex items-center justify-center w-full h-full text-white duration-300 -translate-x-full bg-luxe-gold group-hover:translate-x-0 ease">
                    <i class="fas fa-arrow-right text-luxe-purple"></i>
                </span>
                <span class="absolute flex items-center justify-center w-full h-full text-luxe-gold transition-all duration-300 transform group-hover:translate-x-full ease">DIAGNOSE STYLE</span>
                <span class="relative invisible">DIAGNOSE STYLE</span>
            </button>

            <p class="text-[10px] uppercase tracking-[0.3em] text-white/20 pt-8">
                Data is encrypted & anonymous
            </p>
        </div>

        <div id="quiz-interface" class="hidden h-full min-h-[50vh] flex flex-col justify-center">
            
            <div class="flex justify-between items-center mb-8 border-b border-white/5 pb-4">
                <span class="font-serif text-luxe-gold italic text-xl" id="q-category">Power Dynamics</span>
                <span class="text-xs font-mono text-slate-500" id="progress-text">01 / 13</span>
            </div>

            <h2 id="question-text" class="font-serif text-3xl md:text-4xl text-white mb-12 leading-tight fade-in-up">
                Loading...
            </h2>

            <div id="options-container" class="space-y-4 fade-in-up" style="animation-delay: 0.1s;">
                </div>

            <div class="fixed top-0 left-0 w-full h-1 bg-luxe-purple/20">
                <div id="progress-bar" class="gold-progress h-full w-0 transition-all duration-500"></div>
            </div>
        </div>

        <div id="result-screen" class="hidden text-center max-w-3xl mx-auto">
            
            <div class="fade-in-up">
                <span class="text-[10px] uppercase tracking-[0.4em] text-luxe-gold mb-4 block">Your Archetype Is</span>
                
                <h2 class="font-serif text-6xl md:text-8xl text-white mb-2">
                    The <span id="result-title" class="italic-accent">Loading...</span>
                </h2>
                
                <h3 id="result-subtitle" class="text-slate-400 font-sans text-sm uppercase tracking-widest mb-8 border-b border-white/10 pb-8 inline-block">
                    Loading...
                </h3>

                <p id="result-summary" class="text-lg text-slate-300 leading-loose font-light mb-12">
                    Calculating profile...
                </p>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-12 fade-in-up" style="animation-delay: 0.2s;">
                <div class="border-gold p-6 bg-luxe-panel">
                    <div class="text-[10px] uppercase text-slate-500 mb-2">Mystery Index</div>
                    <div class="font-serif text-2xl text-luxe-gold" id="stat-mystery">High</div>
                </div>
                <div class="border-gold p-6 bg-luxe-panel">
                    <div class="text-[10px] uppercase text-slate-500 mb-2">Dominance</div>
                    <div class="font-serif text-2xl text-luxe-gold" id="stat-dominance">Passive</div>
                </div>
            </div>

            <div class="fade-in-up" style="animation-delay: 0.3s;">
                <button onclick="document.getElementById('full-report').classList.toggle('hidden')" class="text-xs font-bold text-slate-500 uppercase tracking-widest hover:text-white transition mb-6">
                    Read Deep Analysis <i class="fas fa-caret-down ml-2"></i>
                </button>
                
                <div id="full-report" class="hidden text-left bg-white/5 p-8 border-l-2 border-luxe-gold text-slate-400 text-sm leading-relaxed space-y-4 mb-8">
                    <p id="result-desc">Full description...</p>
                    <p class="text-luxe-gold italic">"Your power lies in what you withhold, not what you give."</p>
                </div>

                <div class="flex flex-col sm:flex-row gap-6 justify-center">
                    <button onclick="shareResult()" class="px-8 py-3 bg-luxe-gold text-luxe-purple font-bold font-serif uppercase tracking-wider hover:bg-white transition">
                        Share Persona
                    </button>
                    <a href="seduction-archetypes.html" class="px-8 py-3 border border-white/20 text-white font-bold font-serif uppercase tracking-wider hover:bg-white/5 transition">
                        Enter The Lab
                    </a>
                </div>
            </div>

        </div>

    </main>

    <quiz-footer></quiz-footer>

    <script type="module">
        

        // ================= CONFIG =================
        const questions = [
            { q: "When you walk into a room, you want people to feel...", cat: "Presence",
              a: [
                  { text: "Intimidated. I want them to know I'm the prize.", scores: { dom: 20, mys: 0, cha: 0 } },
                  { text: "Comfortable. I want them to feel seen.", scores: { dom: 0, mys: 0, cha: 20 } },
                  { text: "Curious. I want them wondering who I am.", scores: { dom: 5, mys: 20, cha: 5 } }
              ] 
            },
            { q: "Your flirting style is best described as...", cat: "Tactic",
              a: [
                  { text: "Direct and intense eye contact.", scores: { dom: 20, mys: 0, cha: 5 } },
                  { text: "Playful teasing and hot/cold signals.", scores: { dom: 10, mys: 15, cha: 10 } },
                  { text: "Deep listening and emotional mirroring.", scores: { dom: 0, mys: 5, cha: 25 } }
              ] 
            },
            { q: "If someone pulls away from you, you...", cat: "Reaction",
              a: [
                  { text: "Chase them harder. I love the hunt.", scores: { dom: 25, mys: 0, cha: 0 } },
                  { text: "Pull back further. Let them come to me.", scores: { dom: 10, mys: 20, cha: 0 } },
                  { text: "Ask them what's wrong and try to fix it.", scores: { dom: 0, mys: 0, cha: 15 } }
              ] 
            },
            { q: "What makes someone instantly attractive to you?", cat: "Desire",
              a: [
                  { text: "They seem unobtainable or dangerous.", scores: { dom: 15, mys: 15, cha: 0 } },
                  { text: "They are obsessed with me.", scores: { dom: 20, mys: 0, cha: 0 } },
                  { text: "They make me feel safe and understood.", scores: { dom: 0, mys: 0, cha: 20 } }
              ] 
            },
            { q: "The biggest mistake people make in romance is...", cat: "Philosophy",
              a: [
                  { text: "Giving everything away too soon.", scores: { dom: 5, mys: 25, cha: 0 } },
                  { text: "Being too nice and boring.", scores: { dom: 20, mys: 5, cha: 0 } },
                  { text: "Playing games instead of being real.", scores: { dom: 0, mys: 0, cha: 20 } }
              ] 
            },
            { q: "You are at a party. Where are you?", cat: "Social",
              a: [
                  { text: "In the center, holding court.", scores: { dom: 20, mys: 0, cha: 10 } },
                  { text: "In the corner, having a deep talk with one person.", scores: { dom: 0, mys: 10, cha: 20 } },
                  { text: "Floating around, leaving before it ends.", scores: { dom: 5, mys: 20, cha: 5 } }
              ] 
            },
            { q: "Your ideal first date involves...", cat: "Scenario",
              a: [
                  { text: "Something high-adrenaline or expensive.", scores: { dom: 20, mys: 0, cha: 0 } },
                  { text: "A quiet, dark bar with no distractions.", scores: { dom: 5, mys: 15, cha: 10 } },
                  { text: "Doing something they love so they feel special.", scores: { dom: 0, mys: 0, cha: 25 } }
              ] 
            },
            { q: "How much about your past do you reveal?", cat: "Mystery",
              a: [
                  { text: "Everything. I'm an open book.", scores: { dom: 0, mys: -10, cha: 15 } },
                  { text: "Only the impressive parts.", scores: { dom: 15, mys: 0, cha: 5 } },
                  { text: "Very little. I prefer they imagine the rest.", scores: { dom: 5, mys: 30, cha: 0 } }
              ] 
            },
            { q: "When you want something, you...", cat: "Action",
              a: [
                  { text: "Take it.", scores: { dom: 25, mys: 0, cha: 0 } },
                  { text: "Hint at it until they offer it.", scores: { dom: 5, mys: 20, cha: 5 } },
                  { text: "Ask nicely and explain why.", scores: { dom: 0, mys: 0, cha: 15 } }
              ] 
            },
            { q: "What is your secret weapon?", cat: "Asset",
              a: [
                  { text: "My looks / My reputation.", scores: { dom: 20, mys: 0, cha: 0 } },
                  { text: "My absence. People miss me when I'm gone.", scores: { dom: 5, mys: 25, cha: 0 } },
                  { text: "My empathy. I know what people need.", scores: { dom: 0, mys: 5, cha: 25 } }
              ] 
            },
            { q: "Conflict in a relationship is...", cat: "Conflict",
              a: [
                  { text: "A power struggle I intend to win.", scores: { dom: 20, mys: 0, cha: -5 } },
                  { text: "Something to be avoided or smoothed over.", scores: { dom: 0, mys: 5, cha: 20 } },
                  { text: "A chance to create emotional spikes.", scores: { dom: 10, mys: 15, cha: 5 } }
              ] 
            },
            { q: "If you were a mythical creature, you would be...", cat: "Abstract",
              a: [
                  { text: "A Dragon. Powerful and hoarding gold.", scores: { dom: 25, mys: 0, cha: 0 } },
                  { text: "A Siren. Luring sailors to the rocks.", scores: { dom: 10, mys: 25, cha: 0 } },
                  { text: "A Healer. Fixing the broken.", scores: { dom: 0, mys: 0, cha: 25 } }
              ] 
            },
            { q: "Finally, what do you really want?", cat: "Goal",
              a: [
                  { text: "Worship.", scores: { dom: 20, mys: 5, cha: 0 } },
                  { text: "Obsession.", scores: { dom: 5, mys: 20, cha: 0 } },
                  { text: "Connection.", scores: { dom: 0, mys: 0, cha: 20 } }
              ] 
            }
        ];

        const archetypes = {
            "Siren": {
                title: "The Siren",
                subtitle: "The Ultimate Fantasy",
                summary: "You operate through sensory distraction. You offer a world of pleasure and danger that men/women cannot resist.",
                desc: "Your high Mystery and moderate Dominance make you a Siren. You do not chase; you lure. You understand that people are bored, and you offer them a spectacle. Your power lies in your ability to embody the fantasy of your target while remaining just out of reach."
            },
            "Rake": {
                title: "The Rake",
                subtitle: "The Relentless Hunter",
                summary: "You desire the impossible. You overwhelm your target with pure, focused desire until they surrender.",
                desc: "High Dominance defines you. You are the Rake (or the Ardour). You don't play games of subtle withdrawal; you burn with intensity. Your secret weapon is the ability to make the target feel like they are the only person in the world... for now."
            },
            "Coquette": {
                title: "The Coquette",
                subtitle: "The Hot & Cold Master",
                summary: "You are a master of delayed gratification. You give hope, then withdraw it, keeping them trapped in the loop.",
                desc: "High Mystery and calculated withdrawal make you a Coquette. You understand that humans want what they cannot have. By oscillating between warmth and coldness, you create an addiction in your target that is hard to break."
            },
            "Charmer": {
                title: "The Charmer",
                subtitle: "The Mirror",
                summary: "You make people feel amazing about themselves. You deflect attention from yourself to shine it on them.",
                desc: "High Charm scores. You do not fight; you yield. By validating the target's ego and listening intensely, you lower their defenses completely. They fall for you because they love who they are when they are with you."
            },
            "Ideal": {
                title: "The Ideal Lover",
                subtitle: "The Broken Wing Fixer",
                summary: "You represent the dreams of your target. You observe what is missing in their life and become it.",
                desc: "Balanced Mystery and Charm. You play the role of the savior or the muse. You have a chameleon-like quality that allows you to fit into the empty space in someone's soul perfectly."
            },
            "Dandy": {
                title: "The Dandy",
                subtitle: "The Rule Breaker",
                summary: "You refuse to fit into boxes. Your androgyny or rebellion is magnetic to those trapped in boredom.",
                desc: "Moderate Dominance and Mystery. You seduce by offering a life of freedom. You represent the 'forbidden fruit' to people who are tired of playing by society's rules."
            },
            "Natural": {
                title: "The Natural",
                subtitle: "The Innocent",
                summary: "You aren't trying to seduce, which is why it works. Your playful, childish energy lowers all guards.",
                desc: "Balanced scores with low Dominance. You remind people of a simpler time. Your lack of pretension is refreshing in a world of games, making people want to protect and possess you."
            }
        };

        // ================= LOGIC =================
        let currentQ = 0;
        let totalScores = { dom: 0, mys: 0, cha: 0 };
        let startTime = 0;

        // Exposed functions
        window.startQuiz = function() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('quiz-interface').classList.remove('hidden');
            startTime = Date.now();
            renderQuestion();
        }

        window.shareResult = function() {
            if(navigator.share) {
                navigator.share({ title: "My Seduction Archetype", text: "I am " + document.getElementById('result-title').innerText, url: window.location.href });
            } else {
                alert("Result copied to clipboard.");
            }
        }

        function renderQuestion() {
            if (currentQ >= questions.length) {
                finishQuiz();
                return;
            }

            const q = questions[currentQ];
            document.getElementById('q-category').innerText = q.cat;
            document.getElementById('question-text').innerText = q.q;
            document.getElementById('progress-text').innerText = String(currentQ + 1).padStart(2, '0') + " / " + questions.length;
            
            // Progress Bar
            document.getElementById('progress-bar').style.width = ((currentQ / questions.length) * 100) + "%";

            const container = document.getElementById('options-container');
            container.innerHTML = '';

            q.a.forEach((opt) => {
                const btn = document.createElement('button');
                btn.className = "choice-btn w-full p-6 text-left text-lg text-slate-300 rounded-r-lg group";
                btn.innerHTML = `<span class="group-hover:text-luxe-gold transition-colors">${opt.text}</span>`;
                btn.onclick = () => handleAnswer(opt.scores);
                container.appendChild(btn);
            });
        }

        function handleAnswer(scores) {
            totalScores.dom += scores.dom;
            totalScores.mys += scores.mys;
            totalScores.cha += scores.cha;
            currentQ++;
            renderQuestion();
        }

        function finishQuiz() {
            const durationSec = ((Date.now() - startTime) / 1000).toFixed(0);
            
            // Determine Archetype
            let resultKey = "Natural";
            const { dom, mys, cha } = totalScores;

            if (mys > 100 && dom > 50) resultKey = "Siren";
            else if (mys > 100 && cha > 50) resultKey = "Ideal";
            else if (mys > 120) resultKey = "Coquette";
            else if (dom > 120) resultKey = "Rake";
            else if (cha > 120) resultKey = "Charmer";
            else if (dom > 50 && mys > 50) resultKey = "Dandy";
            else resultKey = "Natural";

            const data = archetypes[resultKey];

            // UI Render
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            document.getElementById('result-title').innerText = data.title;
            document.getElementById('result-subtitle').innerText = data.subtitle;
            document.getElementById('result-summary').innerText = data.summary;
            document.getElementById('result-desc').innerText = data.desc;

            // Stats
            document.getElementById('stat-mystery').innerText = mys > 80 ? "Enigmatic" : "Open";
            document.getElementById('stat-dominance').innerText = dom > 80 ? "Hunter" : (cha > 80 ? "Yielding" : "Passive");

            // Save Data
            const payload = {
                testId: "seduction_archetype",
                timestamp: new Date().toISOString(),
                archetype: resultKey,
                metrics: {
                    dominance_index: dom,
                    mystery_score: mys,
                    charm_factor: cha,
                    time_taken: parseInt(durationSec)
                }
            };

            // Use global save handler if available
            if (window.saveTestResult) {
                try {
                    window.saveTestResult(payload);
                    console.log("Saved Seduction Profile");
                } catch(e) { console.warn("Save Error", e); }
            } else {
                console.log("Mock Save:", payload);
            }
        }
    </script>
</body>
</html>