<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuizRealm • Trophy Room</title>
    <meta name="theme-color" content="#0A0F1E">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">    <script src="game-engine.js"></script>
    <script type="module" src="firebase-config.js"></script>
    <script src="components.js" defer></script>
<script type="module" src="assets/ux-core.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Outfit', 'sans-serif'], mono: ['Share Tech Mono', 'monospace'] },
                    colors: { bgDark: '#020617', accentCyan: '#06b6d4', accentGold: '#eab308', accentPurple: '#a855f7' }
                }
            }
        }
    </script>

    <style>
        body { background-color: #020617; color: #e2e8f0; min-height: 100vh; overflow-x: hidden; background-image: radial-gradient(circle at 50% 0%, #1e1b4b, #020617 70%); }
        .glass-panel { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
        
        /* Rarity Styles */
        .border-common { border-left: 3px solid #94a3b8; }
        .border-rare { border-left: 3px solid #3b82f6; }
        .border-epic { border-left: 3px solid #a855f7; }
        .border-legendary { border-left: 3px solid #eab308; box-shadow: 0 0 15px rgba(234, 179, 8, 0.1); }

        .card-locked { filter: grayscale(1) opacity(0.4); transition: all 0.3s; }
        .card-locked:hover { opacity: 0.6; }
        .card-unlocked { background: linear-gradient(90deg, rgba(255,255,255,0.03), transparent); }

        @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-item { animation: fadeUp 0.3s ease-out forwards; opacity: 0; }
    </style>
</head>
<body class="flex flex-col antialiased">

    <quiz-header></quiz-header>

    <div class="border-b border-white/5 bg-[#020617]/95 backdrop-blur sticky top-[60px] z-40 py-4 shadow-xl">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-xl bg-accentGold/10 flex items-center justify-center text-accentGold border border-accentGold/20 shadow-[0_0_15px_rgba(234,179,8,0.2)]">
                    <i class="fas fa-trophy text-xl"></i>
                </div>
                <div>
                    <h1 class="text-lg font-bold text-white uppercase tracking-wider">Hall of Achievements</h1>
                    <p class="text-xs text-slate-500">Global Ranking: <span class="text-accentCyan font-bold">Top 12%</span></p>
                </div>
            </div>
            
            <div class="flex items-center gap-8 w-full md:w-auto">
                <div class="flex-grow md:flex-grow-0">
                    <div class="flex justify-between text-[10px] text-slate-400 uppercase tracking-wider mb-1">
                        <span>Completion</span>
                        <span class="text-white font-bold" id="percentDisplay">0%</span>
                    </div>
                    <div class="w-full md:w-64 h-2 bg-slate-800 rounded-full overflow-hidden">
                        <div id="progressLine" class="h-full bg-gradient-to-r from-accentCyan to-accentPurple w-0 transition-all duration-1000"></div>
                    </div>
                </div>
                <div class="text-right hidden md:block">
                    <div class="text-2xl font-mono font-bold text-white leading-none">
                        <span id="unlockedDisplay">0</span><span class="text-slate-600 text-lg">/</span><span id="totalDisplay" class="text-slate-500 text-lg">0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <main class="flex-grow p-6 max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-12 gap-8">

        <aside class="lg:col-span-3">
            <div class="sticky top-40 space-y-6">
                <div class="glass-panel rounded-xl p-2">
                    <div class="px-3 py-2 text-xs font-bold text-slate-500 uppercase tracking-wider border-b border-white/5 mb-2">Categories</div>
                    <nav class="space-y-1" id="filterNav">
                        </nav>
                </div>

                <div id="spotlightCard" class="hidden glass-panel rounded-xl p-6 border border-accentPurple/30 relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-accentPurple/10 to-transparent"></div>
                    <h3 class="relative z-10 text-[10px] font-bold text-accentPurple uppercase tracking-widest mb-2"><i class="fas fa-gem mr-1"></i> Crown Jewel</h3>
                    <div class="relative z-10">
                        <div class="text-white font-bold text-xl leading-tight" id="spotlightTitle">--</div>
                        <div class="text-slate-400 text-xs mt-2 leading-relaxed" id="spotlightDesc">--</div>
                        <div class="mt-3 inline-block px-2 py-1 rounded bg-accentPurple/20 text-accentPurple text-[10px] font-bold uppercase border border-accentPurple/30">Legendary</div>
                    </div>
                    <i class="fas fa-medal absolute -bottom-4 -right-4 text-8xl text-accentPurple/10 group-hover:scale-110 transition"></i>
                </div>
            </div>
        </aside>

        <div class="lg:col-span-9">
            <div id="achGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                </div>
            
            <div id="emptyState" class="hidden py-20 text-center border border-dashed border-white/10 rounded-2xl">
                <div class="inline-block p-4 rounded-full bg-slate-800 text-slate-600 mb-4"><i class="fas fa-lock text-2xl"></i></div>
                <p class="text-slate-500">No achievements unlocked in this category yet.</p>
            </div>
        </div>

    </main>

    




<div class="qr-seo-wrapper">
    <style>
        /* --- CONTAINER & SHARED STYLES --- */
        .qr-seo-wrapper {
            display: flex;
            flex-direction: column;
            gap: 3rem;
            width: 100%;
            max-width: 1200px;
            margin: 4rem auto;
            padding: 0 1rem;
            font-family: system-ui, -apple-system, sans-serif;
            color: #94a3b8;
            line-height: 1.6;
        }

        /* --- CARD BASE --- */
        .qr-hub-card {
            position: relative;
            background: linear-gradient(145deg, #060b18, #0f172a);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 20px 50px -10px rgba(0, 0, 0, 0.5);
            padding: 2.5rem;
            display: flex;
            flex-direction: column;
        }

        /* CARD THEMES (Unique Colors) */
        .theme-green { border-left: 4px solid #10b981; }
        .theme-green h2 span { color: #34d399; }
        .theme-green .qr-badge { background: rgba(16, 185, 129, 0.1); border-color: rgba(16, 185, 129, 0.2); color: #6ee7b7; }
        .theme-green a { color: #34d399; }

        .theme-purple { border-left: 4px solid #a855f7; }
        .theme-purple h2 span { color: #c084fc; }
        .theme-purple .qr-badge { background: rgba(168, 85, 247, 0.1); border-color: rgba(168, 85, 247, 0.2); color: #d8b4fe; }
        .theme-purple a { color: #c084fc; }

        .theme-cyan { border-left: 4px solid #06b6d4; }
        .theme-cyan h2 span { color: #22d3ee; }
        .theme-cyan .qr-badge { background: rgba(6, 182, 212, 0.1); border-color: rgba(6, 182, 212, 0.2); color: #67e8f9; }
        .theme-cyan a { color: #22d3ee; }

        .theme-amber { border-left: 4px solid #f59e0b; }
        .theme-amber h2 span { color: #fbbf24; }
        .theme-amber .qr-badge { background: rgba(245, 158, 11, 0.1); border-color: rgba(245, 158, 11, 0.2); color: #fcd34d; }
        .theme-amber a { color: #fbbf24; }

        /* Content Layout */
        .qr-card-content {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            height: 100%;
        }
        @media (min-width: 900px) {
            .qr-card-content { flex-direction: row; align-items: flex-start; }
        }

        .qr-main-col { flex: 1; }
        
        .qr-side-col {
            width: 100%;
            max-width: 320px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }

        /* Typography & Elements */
        .qr-badge {
            display: inline-flex; align-items: center; gap: 8px;
            padding: 4px 12px; border-radius: 99px;
            font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.2em;
            margin-bottom: 1rem; font-weight: 700;
        }
        .qr-hub-card h2 { color: #fff; font-size: 1.8rem; margin: 0 0 1rem 0; line-height: 1.2; letter-spacing: -0.02em; }
        .qr-hub-card p { margin-bottom: 1.5rem; font-size: 0.95rem; text-align: justify; }
        .qr-hub-card strong { color: #fff; }
        .qr-hub-card a { font-weight: 600; text-decoration: none; border-bottom: 1px solid transparent; transition: 0.2s; }
        .qr-hub-card a:hover { border-bottom-color: currentColor; }

        /* Sidebar Links */
        .qr-sidebar-link {
            display: flex; align-items: center; gap: 12px;
            padding: 10px; margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            text-decoration: none !important;
        }
        .qr-sidebar-link:hover { background: rgba(255, 255, 255, 0.08); }
        .qr-link-text { display: flex; flex-direction: column; }
        .qr-link-head { color: #e2e8f0; font-size: 0.85rem; font-weight: 700; }
        .qr-link-sub { color: #64748b; font-size: 0.7rem; }
        .qr-icon { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.05); border-radius: 6px; }

        /* Game Grid (Card 1) */
        .qr-game-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 10px;
            padding-top: 1.5rem; border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        .qr-mini-link {
            padding: 8px; background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px solid rgba(255,255,255,0.05);
            text-align: center; font-size: 0.75rem; color: #cbd5e1 !important;
        }
        .qr-mini-link:hover { background: rgba(255,255,255,0.1); }

        /* Dense Link Matrix (Card 4) */
        .qr-link-matrix {
            display: flex; flex-wrap: wrap; gap: 8px; margin-top: 1rem;
        }
        .qr-matrix-item {
            font-size: 0.75rem; padding: 4px 10px; border-radius: 4px; 
            background: rgba(251, 191, 36, 0.1); color: #fbbf24 !important;
            border: 1px solid rgba(251, 191, 36, 0.2);
        }
        .qr-matrix-item:hover { background: rgba(251, 191, 36, 0.2); }

        @media (max-width: 600px) {
            .qr-hub-card { padding: 1.5rem; }
            .qr-side-col { max-width: 100%; }
        }
    </style>

    <div class="qr-hub-card theme-green">
        <div class="qr-card-content">
            <div class="qr-main-col">
                <div class="qr-badge"><i class="fas fa-gamepad"></i> The Neural Gym</div>
                <h2>Arcade: <span>Logic & Reaction Training</span></h2>
                <p>
                    The <strong>Quiz Realm Arcade</strong> is a dedicated gymnasium for your brain. Designed for competitive data hunters, our platform offers a suite of 13+ browser-based games that require zero downloads. From the vocabulary challenges of <strong>Word Ladder</strong> to the binary constraints of <strong>Tango</strong>, these games are engineered to stimulate cognitive function.
                </p>
                <p>
                    Whether you are killing time or keeping your daily streak alive, our engine tracks every move. Your performance across these modes contributes to your global RPG Rank, allowing you to level up from "Drifter" to "System Lord" based purely on mental agility.
                </p>
                
                <div style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; margin-top: 1rem; color: #fff;">Featured Modules</div>
                <div class="qr-game-grid">
                    <a href="/fusion-core.html" class="qr-mini-link">Logic Core</a>
                    <a href="/cryptex.html" class="qr-mini-link">Cryptex</a>
                    <a href="/rapid.html" class="qr-mini-link">Rapid Fire</a>
                    <a href="/nexus.html" class="qr-mini-link">Nexus</a>
                    <a href="/minigames.html" class="qr-mini-link">Pictionary</a>
                    <a href="/timeline-history.html" class="qr-mini-link">Timeline</a>
                </div>
            </div>
            <div class="qr-side-col">
                <div style="margin-bottom:1rem; font-size:0.7rem; text-transform:uppercase; letter-spacing:0.1em;">Quick Play</div>
                <a href="/daily.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-calendar-day text-green-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Daily Challenge</span><span class="qr-link-sub">Streak Builder</span></div>
                </a>
                <a href="/arcade.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-th text-green-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Full Roster</span><span class="qr-link-sub">View All Games</span></div>
                </a>
            </div>
        </div>
    </div>

    <div class="qr-hub-card theme-purple">
        <div class="qr-card-content">
            <div class="qr-main-col">
                <div class="qr-badge"><i class="fas fa-book"></i> The Archives</div>
                <h2>Knowledge Hubs: <span>Deep Lore & Fandom</span></h2>
                <p>
                    For players who prefer deep data over reflexes, the <strong>Knowledge Nexus</strong> offers specialized "Hubs" for the world's biggest franchises. Here, you can explore the intricate timelines of the cinematic universes, study the genealogy of comic book mutants, or analyze sci-fi physics.
                </p>
                <p>
                    <strong>Why separate Hubs?</strong> Standard trivia mixes topics randomly. Our Hubs allow for "Vertical Progression." You start with surface-level facts (e.g., "Who is Iron Man?") and unlock "Deep Lore" questions (e.g., "Earth-616 Serial Numbers") as you level up. Ideal for completionists.
                </p>
            </div>
            <div class="qr-side-col">
                <div style="margin-bottom:1rem; font-size:0.7rem; text-transform:uppercase; letter-spacing:0.1em;">Select Universe</div>
                <a href="/encyclopedia/marvel.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-shield-alt text-purple-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Marvel Multiverse</span><span class="qr-link-sub">MCU & Comics</span></div>
                </a>
                <a href="/hero-hub.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-mask text-purple-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">DC Archives</span><span class="qr-link-sub">Gotham & Krypton</span></div>
                </a>
                <a href="/rickandmortyhub.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-flask text-purple-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Rick & Morty</span><span class="qr-link-sub">Sci-Fi Lore</span></div>
                </a>
            </div>
        </div>
    </div>

    <div class="qr-hub-card theme-cyan">
        <div class="qr-card-content">
            <div class="qr-main-col">
                <div class="qr-badge"><i class="fas fa-fingerprint"></i> Identity Protocol</div>
                <h2>Player Profile: <span>Gamify Your Mind</span></h2>
                <p>
                    Knowledge is personal. The Quiz Realm utilizes a persistent <strong>RPG Progression System</strong>. Every question you answer contributes XP (Experience Points) to your profile, building a unique "Data Fingerprint." Are you a specialist in History but weak in Pop Culture? Your stats will reveal the truth.
                </p>
                <p>
                    We also host the <strong>Identity Lab</strong>. Unlike standard quizzes that score you right or wrong, our Identity Protocol uses a psych-eval algorithm to analyze your choices. Answer ethical dilemmas to discover which fictional archetype matches your personality—from "Stark-Level Visionary" to "Jedi Consular."
                </p>
            </div>
            <div class="qr-side-col">
                <div style="margin-bottom:1rem; font-size:0.7rem; text-transform:uppercase; letter-spacing:0.1em;">Your Data</div>
                <a href="/profile.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-user-circle text-cyan-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">My Profile</span><span class="qr-link-sub">Check Stats</span></div>
                </a>
                <a href="/achievements.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-trophy text-cyan-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Trophy Room</span><span class="qr-link-sub">Badges & Ranks</span></div>
                </a>
            </div>
        </div>
    </div>

    <div class="qr-hub-card theme-amber">
        <div class="qr-card-content">
            <div class="qr-main-col">
                <div class="qr-badge"><i class="fas fa-layer-group"></i> Master Index</div>
                <h2>The Taxonomy: <span>Browse by Category</span></h2>
                <p>
                    Not sure where to begin? The <strong>Master Index</strong> breaks down our entire question database into granular categories. Whether you are a student brushing up on <a href="#">STEM</a> subjects or a film buff organizing a trivia night, you can filter by topic.
                </p>
                <p>
                    Our database is updated weekly with trending topics. Below is the direct routing matrix to our most popular question banks. Selecting a category here bypasses the main menu and launches a "Quick Play" session immediately.
                </p>

                <div style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; margin-top: 1.5rem; color: #fff;">Direct Access Matrix</div>
                <div class="qr-link-matrix">
                    <a href="/categories.html" class="qr-matrix-item">General Knowledge</a>
                    <a href="/categories.html" class="qr-matrix-item">Film & Cinema</a>
                    <a href="/categories.html" class="qr-matrix-item">World History</a>
                    <a href="/categories.html" class="qr-matrix-item">Geography</a>
                    <a href="/categories.html" class="qr-matrix-item">Science (STEM)</a>
                    <a href="/categories.html" class="qr-matrix-item">Technology</a>
                    <a href="/categories.html" class="qr-matrix-item">Literature</a>
                    <a href="/categories.html" class="qr-matrix-item">Music Theory</a>
                    <a href="/categories.html" class="qr-matrix-item">Video Games</a>
                    <a href="/categories.html" class="qr-matrix-item">Art History</a>
                    <a href="/categories.html" class="qr-matrix-item">Sports</a>
                    <a href="/categories.html" class="qr-matrix-item">Mythology</a>
                    <a href="/categories.html" class="qr-matrix-item">Television</a>
                    <a href="/categories.html" class="qr-matrix-item">Anime / Manga</a>
                    <a href="/categories.html" class="qr-matrix-item">Celebs</a>
                </div>
            </div>
            
            <div class="qr-side-col">
                <div style="margin-bottom:1rem; font-size:0.7rem; text-transform:uppercase; letter-spacing:0.1em;">System Links</div>
                <a href="/about.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-info text-amber-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">About Us</span><span class="qr-link-sub">Mission Statement</span></div>
                </a>
                <a href="/contact.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-envelope text-amber-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Contact</span><span class="qr-link-sub">Support & feedback</span></div>
                </a>
                <a href="/privacy.html" class="qr-sidebar-link">
                    <div class="qr-icon"><i class="fas fa-lock text-amber-400"></i></div>
                    <div class="qr-link-text"><span class="qr-link-head">Privacy</span><span class="qr-link-sub">Data Policy</span></div>
                </a>
            </div>
        </div>
    </div>

</div>



<quiz-footer></quiz-footer>

    <script>
        // 1. THE MASSIVE DATABASE
        const ACHIEVEMENTS = [
            // --- GENERAL (Starter) ---
            { id: "new_recruit", title: "New Recruit", desc: "Complete your first quiz session.", rarity: "common", group: "general" },
            { id: "rookie_runner", title: "Rookie Runner", desc: "Play 5 quizzes total.", rarity: "common", group: "general" },
            { id: "quiz_addict", title: "Quiz Addict", desc: "Complete 50 quizzes.", rarity: "epic", group: "general" },
            { id: "the_veteran", title: "The Veteran", desc: "Reach Level 25.", rarity: "legendary", group: "general" },
            
            // --- SCORE & ACCURACY ---
            { id: "perfect_score", title: "Flawless Victory", desc: "Get 100% score on any quiz.", rarity: "rare", group: "mastery" },
            { id: "sharpshooter", title: "Sharpshooter", desc: "Answer 10 questions correctly in a row.", rarity: "rare", group: "mastery" },
            { id: "laser_focus", title: "Laser Focus", desc: "Maintain 90% accuracy over 100 questions.", rarity: "epic", group: "mastery" },
            { id: "point_millionaire", title: "Score Millionaire", desc: "Earn 1,000,000 total XP.", rarity: "legendary", group: "mastery" },

            // --- STREAKS ---
            { id: "streak_3", title: "Warming Up", desc: "3-Day Login Streak.", rarity: "common", group: "streaks" },
            { id: "streak_7", title: "Dedicated Agent", desc: "7-Day Login Streak.", rarity: "rare", group: "streaks" },
            { id: "streak_30", title: "Iron Will", desc: "30-Day Login Streak.", rarity: "epic", group: "streaks" },
            { id: "streak_100", title: "Century Club", desc: "100-Day Login Streak.", rarity: "legendary", group: "streaks" },

            // --- SPEED ---
            { id: "quick_thinker", title: "Quick Thinker", desc: "Answer in under 5 seconds.", rarity: "common", group: "speed" },
            { id: "speed_demon", title: "Speed Demon", desc: "Finish a quiz in under 60 seconds.", rarity: "rare", group: "speed" },
            { id: "lightning_reflexes", title: "Lightning Reflexes", desc: "Answer 5 questions in under 2 seconds each.", rarity: "epic", group: "speed" },

            // --- MOVIES ---
            { id: "superman_legacy", title: "Kryptonian Historian", desc: "Ace the Superman Legacy quiz.", rarity: "rare", group: "movies" },
            { id: "gotham_knight", title: "Dark Knight", desc: "Get 100% on Impossible Batman.", rarity: "epic", group: "movies" },
            { id: "cinephile", title: "Cinephile", desc: "Complete 20 Movie quizzes.", rarity: "rare", group: "movies" },
            { id: "marvel_fan", title: "Avenger", desc: "Answer 50 Marvel questions correctly.", rarity: "rare", group: "movies" },
            { id: "dc_fan", title: "Justice Leaguer", desc: "Answer 50 DC questions correctly.", rarity: "rare", group: "movies" },

            // --- SCIENCE & TECH ---
            { id: "lab_coat", title: "Lab Coat", desc: "Complete a Chemistry quiz.", rarity: "common", group: "science" },
            { id: "silicon_mind", title: "Silicon Mind", desc: "Ace a Technology quiz.", rarity: "rare", group: "science" },
            { id: "astrophysicist", title: "Star Gazer", desc: "Get 100% on a Space quiz.", rarity: "epic", group: "science" },

            // --- HISTORY & GEO ---
            { id: "time_traveler", title: "Time Traveler", desc: "Complete 10 History quizzes.", rarity: "rare", group: "history" },
            { id: "world_traveler", title: "Globetrotter", desc: "Identify 50 countries correctly.", rarity: "epic", group: "history" },
            
            // --- META / HIDDEN ---
            { id: "night_owl", title: "Night Owl", desc: "Play a quiz after 2 AM.", rarity: "rare", group: "secret" },
            { id: "early_bird", title: "Early Bird", desc: "Play a quiz before 6 AM.", rarity: "rare", group: "secret" },
            { id: "rage_quit", title: "Rage Quitter", desc: "Abandon a quiz halfway through.", rarity: "common", group: "secret" },
            { id: "secret_404", title: "Lost in the Realm", desc: "Find a broken link or 404 page.", rarity: "legendary", group: "secret" }
        ];

        // 2. STATE MANAGEMENT
        let userBadges = [];

        // 3. INITIALIZATION
        document.addEventListener('DOMContentLoaded', () => {
            connectEngine();
        });

        function connectEngine() {
            const check = setInterval(() => {
                if(window.GameEngine && window.GameEngine.state) {
                    clearInterval(check);
                    userBadges = window.GameEngine.state.badges || [];
                    initUI();
                }
            }, 200);
            
            // Fallback for visual testing if engine is offline
            setTimeout(() => {
                if(userBadges.length === 0) {
                    try {
                        const local = JSON.parse(localStorage.getItem('QR_PROFILE'));
                        if(local && local.badges) userBadges = local.badges;
                    } catch(e) {}
                    initUI();
                }
            }, 1000);
        }

        function initUI() {
            renderStats();
            renderFilters();
            renderGrid('all');
            renderSpotlight();
        }

        // 4. RENDERING LOGIC
        function renderStats() {
            const total = ACHIEVEMENTS.length;
            const unlocked = userBadges.length;
            const pct = Math.round((unlocked/total)*100);

            document.getElementById('unlockedDisplay').innerText = unlocked;
            document.getElementById('totalDisplay').innerText = total;
            document.getElementById('percentDisplay').innerText = pct + '%';
            document.getElementById('progressLine').style.width = pct + '%';
        }

        function renderFilters() {
            const groups = ['all', ...new Set(ACHIEVEMENTS.map(a => a.group))];
            const nav = document.getElementById('filterNav');
            
            nav.innerHTML = groups.map(g => {
                const label = g.charAt(0).toUpperCase() + g.slice(1);
                const icon = getIcon(g);
                const count = g === 'all' ? ACHIEVEMENTS.length : ACHIEVEMENTS.filter(a => a.group === g).length;
                return `
                    <button onclick="renderGrid('${g}')" class="w-full text-left px-3 py-2 rounded-lg text-sm text-slate-400 hover:text-white hover:bg-white/5 transition flex items-center justify-between group focus:bg-white/10 focus:text-accentCyan">
                        <div class="flex items-center gap-3">
                            <i class="fas ${icon} w-4 text-center opacity-70"></i>
                            <span>${label}</span>
                        </div>
                        <span class="text-[10px] bg-black/40 px-2 rounded-full text-slate-500">${count}</span>
                    </button>
                `;
            }).join('');
        }

        window.renderGrid = function(filter) {
            const grid = document.getElementById('achGrid');
            grid.innerHTML = '';
            
            const filtered = ACHIEVEMENTS.filter(a => filter === 'all' || a.group === filter);
            
            if(filtered.length === 0) {
                document.getElementById('emptyState').classList.remove('hidden');
                return;
            }
            document.getElementById('emptyState').classList.add('hidden');

            filtered.forEach((ach, i) => {
                const isUnlocked = userBadges.includes(ach.id);
                const borderClass = `border-${ach.rarity}`;
                const delay = i * 30; // Staggered animation

                const html = `
                <div class="glass-panel rounded-xl p-5 flex gap-4 items-start fade-item ${borderClass} ${isUnlocked ? 'card-unlocked' : 'card-locked'}" 
                     style="animation-delay: ${delay}ms">
                    
                    <div class="w-12 h-12 rounded-lg bg-black/40 border border-white/5 flex items-center justify-center flex-shrink-0 text-xl shadow-inner">
                        <i class="fas ${getIcon(ach.group)} ${isUnlocked ? getRarityColor(ach.rarity) : 'text-slate-600'}"></i>
                    </div>

                    <div class="flex-grow min-w-0">
                        <div class="flex justify-between items-start mb-1">
                            <h4 class="font-bold text-sm text-white truncate pr-2">${ach.title}</h4>
                            ${isUnlocked 
                                ? `<i class="fas fa-check-circle text-green-500 text-xs shadow-green-500/50 drop-shadow-md"></i>` 
                                : `<i class="fas fa-lock text-slate-700 text-xs"></i>`}
                        </div>
                        <p class="text-xs text-slate-400 leading-relaxed mb-3 line-clamp-2">${ach.desc}</p>
                        
                        <div class="flex gap-2 items-center">
                            <span class="text-[9px] uppercase font-bold tracking-wider px-1.5 py-0.5 rounded border border-white/10 ${getRarityColor(ach.rarity)} bg-white/5">
                                ${ach.rarity}
                            </span>
                            ${isUnlocked ? '<span class="text-[9px] text-slate-500">Unlocked</span>' : ''}
                        </div>
                    </div>
                </div>`;
                grid.innerHTML += html;
            });
        }

        function renderSpotlight() {
            // Find the best unlocked achievement
            const unlockedObjs = ACHIEVEMENTS.filter(a => userBadges.includes(a.id));
            if(unlockedObjs.length === 0) return;

            const value = { legendary: 4, epic: 3, rare: 2, common: 1 };
            unlockedObjs.sort((a,b) => value[b.rarity] - value[a.rarity]);

            const best = unlockedObjs[0];
            const card = document.getElementById('spotlightCard');
            
            document.getElementById('spotlightTitle').innerText = best.title;
            document.getElementById('spotlightDesc').innerText = best.desc;
            card.classList.remove('hidden');
        }

        // --- HELPERS ---
        function getRarityColor(r) {
            return {
                common: 'text-slate-400',
                rare: 'text-blue-400',
                epic: 'text-purple-400',
                legendary: 'text-yellow-400'
            }[r] || 'text-white';
        }

        function getIcon(g) {
            const icons = {
                general: 'fa-gamepad',
                mastery: 'fa-crosshairs',
                streaks: 'fa-fire',
                speed: 'fa-bolt',
                movies: 'fa-film',
                science: 'fa-flask',
                history: 'fa-landmark',
                secret: 'fa-user-secret'
            };
            return icons[g] || 'fa-star';
        }

    </script>
</body>
</html>

